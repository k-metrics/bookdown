# Setup
　R について学ぶ前に R が使えるように環境を整えます。本書では R, RStudio, [tidyverse/ <i class="fa fa-external-link"></i>](https://www.tidyverse.org/){target="_blank"} パッケージならびにその他必要なパッケージの利用を前提としていますのでこれらをインストールしておきます。  
　R ならびに RStudio はマルチプラットフォーム対応（マルチOS対応）ですので Windows, macOS, Linux のどのプラットフォームを選択しても構いません。ただし、64bit プラットフォームであることが条件です。なお、日本語版 Windows では Windows が利用してる文字コード（CP932, Shift JIS）に起因する不具合が散見されています。日本語版 Windows 環境を利用する場合はその点を認識の上で利用してください。  
　  
　環境を整えるための手順は以下のようになります。  

手順 | 実施内容                 | 備考
:---:|--------------------------|------ 
1    | Rのインストール          | 64bit プラットフォーム
2    | Rtoolsのインストール     | Winodws のみ
3    | RStudioのインストール    | Desktop 版
4    | パッケージのインストール | tidyverse, rmarkdown
5    | Gitのインストール        | 任意

　  
　[Git <i class="fa fa-external-link"></i>](https://git-scm.com/){target="_blank"} は VCS(Version Control System) と呼ばれるソースの版管理を行うシステムです。必要な場合のみインストールしてください。  
　  
　本章では環境設定の概略のみを説明します。インストールの詳細に関しては Appendix を参照してください。  
　  

## Install R
　R は [CRAN (The Comprehensive R Archive Network)<i class="fa fa-external-link"></i>](https://cran.r-project.org/){target="_blank"} と呼ばれる公式リポジトリから入手してインストールします。 CRAN には [ミラーサイト <i class="fa fa-external-link"></i>](https://cran.r-project.org/mirrors.html){target="_blank"} も多数ありますので、利用しているインターネット環境に応じて近いサイトからダウンロードしてください。  
　よくある質問は [FAQ(Frequently Asked Questions) <i class="fa fa-external-link"></i>](https://cran.r-project.org/doc/FAQ/R-FAQ.html){target="_blank"} にまとめられています。  
　  

### Install Rtools
　Windows 環境のみ Rtools と呼ばれる開発ツール類（各種コンパイラなど）をまとめたリソースコレクションをインストールする必要があります。必ずインストールした R のバージョン用の Rtools をインストールしてください。
　Linux ならびに macOS はデフォルトで開発ツール類がインストールされていますが、もし、インストールされていない場合には追加でインストールしてください。  
　  

## Install RStudio Desktop
　R のインストールが完了しましたら統合開発環境（IDE）である RStudio Desktop をインストールします。 [Downloadページ <i class="fa fa-external-link"></i>](https://rstudio.com/products/rstudio/download/#download){target="_blank"} から使用している環境用の RStudio をダウンロードしてインストールしてください。  
　  

## Install R packages
　次に本書で利用しているパッケージをインストールするために RStudio を起動します。パッケージのインストールにはインターネット接続が必要です。  
　RStudio が起動されたらウィンドウ左下（下図の B に相当するエリア）にある **Console** のキャレット（`>` の部分）に以下のコマンド（関数）を入力します。  

```{r, echo=FALSE, out.width="80%", fig.cap="RStudio Desktop, Windows"}
knitr::include_graphics("fig/RStudio_Desktop_Area.png")
```

```{r, eval=FALSE}
install.packages(c("tidyverse", "rmarkdown"))
```

　入力が終わりましたら［Enter］キーを押下しコマンド（関数）を実行します。パッケージをインストールための様々なメッセージが表示され、インストールが完了すると再びキャレットが表示されます。
　
　インストールが完了しましたらパッケージが正しくインストールされていることを確認するために **Console** のキャレットで以下のコマンド（関数）を入力して［Enter］キーを押下します。
```{r, eval=FALSE}
library(tidyverse)
```

　パッケージが読み込まれ以下のようなメッセージが表示されれば確認完了ですので、一旦、 RStudio を終了させます。  

```{r, eval=FALSE}
Loading required package: tidyverse
─ Attaching packages ─────────────────────────────── tidyverse 1.3.0 ─
✔ ggplot2 3.2.1     ✔ purrr   0.3.3
✔ tibble  2.1.3     ✔ dplyr   0.8.3
✔ tidyr   1.0.0     ✔ stringr 1.4.0
✔ readr   1.3.1     ✔ forcats 0.4.0
─ Conflicts ───────────────────────────────── tidyverse_conflicts() ─
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
```

　インストール時期によってはバージョン表記などが下記と異なる場合があります。また、日本語版 Windows 環境では一部の文字が化けしますが解決方法はありません。
　  

　以上で R を利用するための環境構築は完了です。次は RStudio の基本的な使い方を紹介します。  
　  

## Trouble shooting
　インストールできない・起動しない・パッケージが読み込めないなど困ったときは [r-wakalang, slack community <i class="fa fa-external-link"></i>](http://qiita.com/uri/items/5583e91bb5301ed5a4ba){target="_blank"} や [RjpWiki <i class="fa fa-external-link"></i>](http://www.okadajp.org/RWiki/){target="_blank"} などで相談するか [Qiita <i class="fa fa-external-link"></i>](http://qiita.com/){target="_blank"} や [stack overflow <i class="fa fa-external-link"></i>](https://stackoverflow.com/){target="_blank"} などで検索してみてください。  
　  
