% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
  12pt,
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
  \setmonofont[Scale=0.96]{Source Code Pro}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Rのすゝめ},
  pdfauthor={Sampo Suzuki, CC 4.0 BY-NC-SA},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage[a4paper, total={6.5in, 9.5in}]{geometry}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{inputenc}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{fontawesome5}
\usepackage{subfig}
\usepackage{xeCJK}
\usepackage[noto]{zxjafont}
\usepackage{zxjatype}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{plainnat}

\title{Rのすゝめ}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{- Rによるデータ分析事始め -}
\author{Sampo Suzuki, CC 4.0 BY-NC-SA}
\date{2021-05-06}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{2}
\tableofcontents
}
\hypertarget{license}{%
\chapter*{License}\label{license}}
\addcontentsline{toc}{chapter}{License}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

本書は \href{https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja}{{[}クリエイティブ・コモンズ 表示 - 非営利 - 継承 4.0 国際 ライセンス{]}} の下に提供されています。

あなたの従うべき条件は以下の通りです。

\begin{itemize}
\item
  表示（BY）

  \begin{itemize}
  \tightlist
  \item
    あなたは 適切なクレジットを表示し、ライセンスへのリンクを提供し、変更があったらその旨を示さなければなりません。これらは合理的であればどのような方法で行っても構いませんが、許諾者があなたやあなたの利用行為を支持していると示唆するような方法は除きます。
  \end{itemize}
\item
  非営利（NC）

  \begin{itemize}
  \tightlist
  \item
    あなたは営利目的でこの資料を利用してはなりません。
  \end{itemize}
\item
  継承（SA）

  \begin{itemize}
  \tightlist
  \item
    もしあなたがこの資料をリミックスしたり、改変したり、加工した場合には、あなたはあなたの貢献部分を元の作品と同じライセンスの下に頒布しなければなりません。
  \end{itemize}
\end{itemize}

\begin{figure}
\centering
\includegraphics{./fig/88x31.png}
\caption{CC 4.0 BY-NC-SA}
\end{figure}

ただし、本書にて引用している文書、図、ロゴなどの権利は原著作者が保有しています。

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{part-introduction}{%
\part{Introduction}\label{part-introduction}}

\hypertarget{ux306fux3058ux3081ux306b}{%
\chapter*{はじめに}\label{ux306fux3058ux3081ux306b}}
\addcontentsline{toc}{chapter}{はじめに}

ソフトウェア開発において「データに基づく品質管理」が必要と言われるようになってから久しくなりますが、様々な理由でデータに基づく管理を実践している組織はまだまだ少数派ではないでしょうか？しかし、世の中の流れは「データドリブン」というキーワードに代表されるようにデータを使いこなせる組織が優位に立てる時代、数学が利益を生み出す数理資本主義の時代と言われています。

\href{https://www.juse-p.co.jp/products/view/442}{{[}『データ指向のソフトウェア品質マネジメント』{]}} は、日本のソフトウェア品質管理におけるデータ管理の必要性とデータ分析に必要な知識を解説している数少ない書籍です。この書籍の著者の一人である小池氏が主催している \href{https://sites.google.com/site/kantometrics/home}{{[}データ分析勉強会{]}} では、メトリクス分析に興味をもつ有志が統計分析を実践するために統計的コンピューティングを中心に様々な知識や手法を学んでいます。

本書は実務でメトリクス分析を行いたいソフトウェア品質技術者をはじめとした統計的コンピューティングに興味を持っている方々に \href{https://www.r-project.org/}{{[}R言語{]}} の基本的な知識を紹介しています。データ分析勉強会を通じて学んだ分析手法を実務で実践したい方の一助になれば幸いです。

\hypertarget{ux60f3ux5b9aux8aadux8005}{%
\section*{想定読者}\label{ux60f3ux5b9aux8aadux8005}}
\addcontentsline{toc}{section}{想定読者}

本書は統計的コンピューティングに興味があり基本的なコンピュータの知識と基礎的な統計の知識を有している方々を読者として想定しています。本書では \href{https://cran.r-project.org/}{{[}R言語{]}} を実行するための環境構築に関する詳細な解説は行いませんの「で、R言語のインストール手順などは市販の書籍やインターネットの情報を参考にしてください。なお、環境構築に不安があるけれどもとりあえずR言語を使ってみたいという方には \href{\%60https://colab.research.google.com/notebook\#create=true\&language=r\%60}{{[}Google Colaboratory{]}} の利用をおすゝめします。

\newpage

\hypertarget{ux8868ux8a18ux30ebux30fcux30eb}{%
\section*{表記ルール}\label{ux8868ux8a18ux30ebux30fcux30eb}}
\addcontentsline{toc}{section}{表記ルール}

本書では以下の表記ルールを用いています。

\begin{longtable}[]{@{}lll@{}}
\toprule
対象 & 表記方法 & 表記例 \\
\midrule
\endhead
ハイパーリンク & {[}{]}付きで表記 & \href{https://www.google.com/?hl=ja}{{[}Google{]}} \\
パス名、ファイル名 & モノフォント（タイプライタフォント） & \texttt{sample/sample.Rmd} \\
パッケージ名 & 太字のモノフォント & \textbf{\texttt{tidyverse}} \\
関数（オブジェクト）名 & モノフォントで()付き表記 & \texttt{print()} \\
コード & モノフォント（プロンプトなし） & \texttt{library(tidyverse)} \\
コードの実行結果 & モノフォント（\texttt{\#\#} プロンプトあり） & \texttt{\#\#\ output...} \\
キーボードでのキー入力 & モノフォントで{[}{]}付きで表記 & {[}\texttt{Ctrl}{]}+{[}\texttt{S}{]} \\
数式 & \LaTeX 数式（math mode） & \(y = ax^2 + b\) \\
\bottomrule
\end{longtable}

\newpage

\hypertarget{ux306aux305c-r-ux3092ux4f7fux3046ux306eux304b}{%
\section*{なぜ R を使うのか}\label{ux306aux305c-r-ux3092ux4f7fux3046ux306eux304b}}
\addcontentsline{toc}{section}{なぜ R を使うのか}

データ分析を行うためには適切な分析ツールが必要不可欠です。\href{https://www.r-project.org/}{{[}R言語{]}} は統計分析に特化しているオープンソースの言語でデータ分析に最適なツールのひとつです。R がデータ分析に向いている理由をまとめているのが \href{https://www.r-bloggers.com/six-reasons-to-learn-r-for-business/}{{[}``Six Reasons To Learn R For Business'', R Blogger{]}} です。

\begin{quote}
\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  R Has The Best \textbf{Overall Qualities}
\item
  R Is Data Science \textbf{For Non-Computer Scientists}
\item
  Learning R Is \textbf{Easy With The Tidyverse}
\item
  R Has \textbf{Brains, Muscle, And Heart}
\item
  R Is Built \textbf{For Business}
\item
  R \textbf{Community} Support
\end{enumerate}
\end{quote}

R はデータ分析に必要となるデータのハンドリングや可視化、モデリング、そして、レポーティングといった様々な機能を無料で利用することができます。また、R は逐次実行のインタプリタ型言語ですのでソフトウェアメトリクス分析のような探索的分析（Exploratory data analysis）に適していると言えます。さらに、非常にフレンドリーかつ活発なコミュニティーが日本でも形成されていますので、悩んだ時などに気軽に質問・相談ができるのも大きな強みです。

\hypertarget{ux5206ux6790ux306eux624bux9806}{%
\section*{分析の手順}\label{ux5206ux6790ux306eux624bux9806}}
\addcontentsline{toc}{section}{分析の手順}

では、R を使った分析とはどのような手順になるかを簡単に見てみましょう。R は分析のための単なるツールですので、データ分析の常套手段してはツールに関係なく最初に分析対象となるデータがどのような分布なのか、どのような値の範囲にあるのか、全てのデータが揃っているかなどを俯瞰することからはじめます。 例えば「フィッシャーのあやめ（Fisher's or Anderson's iris）」を例にとってみましょう。「フィッシャーのあやめ」はRの例題でよく使われる下記のような150行のデータセットでRに標準で組み込まれています。

\begin{table}[H]
\centering\begingroup\fontsize{10}{12}\selectfont

\begin{tabular}[t]{l|l|l|l|l|l}
\hline
  & Sepal.Length & Sepal.Width & Petal.Length & Petal.Width & Species\\
\hline
\cellcolor{gray!6}{1} & \cellcolor{gray!6}{5.1} & \cellcolor{gray!6}{3.5} & \cellcolor{gray!6}{1.4} & \cellcolor{gray!6}{0.2} & \cellcolor{gray!6}{setosa}\\
\hline
2 & 4.9 & 3 & 1.4 & 0.2 & setosa\\
\hline
\cellcolor{gray!6}{3} & \cellcolor{gray!6}{4.7} & \cellcolor{gray!6}{3.2} & \cellcolor{gray!6}{1.3} & \cellcolor{gray!6}{0.2} & \cellcolor{gray!6}{setosa}\\
\hline
... & ... & ... & ... & ... & NA\\
\hline
\cellcolor{gray!6}{148} & \cellcolor{gray!6}{6.5} & \cellcolor{gray!6}{3} & \cellcolor{gray!6}{5.2} & \cellcolor{gray!6}{2} & \cellcolor{gray!6}{virginica}\\
\hline
149 & 6.2 & 3.4 & 5.4 & 2.3 & virginica\\
\hline
\cellcolor{gray!6}{150} & \cellcolor{gray!6}{5.9} & \cellcolor{gray!6}{3} & \cellcolor{gray!6}{5.1} & \cellcolor{gray!6}{1.8} & \cellcolor{gray!6}{virginica}\\
\hline
\end{tabular}
\endgroup{}
\end{table}

このデータセットの主な要約統計量は以下のようになり、Sepal（萼片）よりPetal（花弁）の方が小さい傾向にあると推測できます。

\begin{verbatim}
##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## 
\end{verbatim}

この要約の通りか箱ひげ図を描いて確かめてみますが、元のデータ形式では都合が悪いので以下のように変形しておきます。

\begin{table}[H]
\centering
\begin{tabular}[t]{l|l|l}
\hline
Species & part & value\\
\hline
\cellcolor{gray!6}{setosa} & \cellcolor{gray!6}{Sepal.Length} & \cellcolor{gray!6}{5.1}\\
\hline
setosa & Sepal.Width & 3.5\\
\hline
\cellcolor{gray!6}{setosa} & \cellcolor{gray!6}{Petal.Length} & \cellcolor{gray!6}{1.4}\\
\hline
setosa & Petal.Width & 0.2\\
\hline
\cellcolor{gray!6}{NA} & \cellcolor{gray!6}{NA} & \cellcolor{gray!6}{...}\\
\hline
virginica & Sepal.Length & 5.9\\
\hline
\cellcolor{gray!6}{virginica} & \cellcolor{gray!6}{Sepal.Width} & \cellcolor{gray!6}{3}\\
\hline
virginica & Petal.Length & 5.1\\
\hline
\cellcolor{gray!6}{virginica} & \cellcolor{gray!6}{Petal.Width} & \cellcolor{gray!6}{1.8}\\
\hline
\end{tabular}
\end{table}

変形したデータを使って部位別の箱ひげ図を描くと確かに Petal（花弁）の方が Sepal（萼片）よりも小さい傾向にあることが分かります。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{R_files/figure-latex/unnamed-chunk-5-1} 

}

\caption{花弁と萼片の分布}\label{fig:unnamed-chunk-5}
\end{figure}

次に花弁と萼片の幅と長さの関係を見ると花弁の幅と長さに相関関係があるように見えます。

\begin{figure}[H]

{\centering \subfloat[花弁\label{fig:unnamed-chunk-7-1}]{\includegraphics[width=0.4\linewidth,]{R_files/figure-latex/unnamed-chunk-7-1} }\subfloat[萼片\label{fig:unnamed-chunk-7-2}]{\includegraphics[width=0.4\linewidth,]{R_files/figure-latex/unnamed-chunk-7-2} }

}

\caption{幅と長さの関係}\label{fig:unnamed-chunk-7}
\end{figure}

そこで、花弁の幅と長さの回帰関係を求めてみます。

\begin{verbatim}
## 
## Call:
## lm(formula = Petal.Length ~ Petal.Width)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.33542 -0.30347 -0.02955  0.25776  1.39453 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  1.08356    0.07297   14.85   <2e-16 ***
## Petal.Width  2.22994    0.05140   43.39   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4782 on 148 degrees of freedom
## Multiple R-squared:  0.9271, Adjusted R-squared:  0.9266 
## F-statistic:  1882 on 1 and 148 DF,  p-value: < 2.2e-16
\end{verbatim}

モデルの当てはまり具合が良さそうなので、回帰関係を可視化してみます。ついでに萼片の方も可視化してみます。

\begin{figure}[H]

{\centering \subfloat[花弁の回帰関係\label{fig:unnamed-chunk-9-1}]{\includegraphics[width=0.4\linewidth,]{R_files/figure-latex/unnamed-chunk-9-1} }\subfloat[萼片の回帰関係\label{fig:unnamed-chunk-9-2}]{\includegraphics[width=0.4\linewidth,]{R_files/figure-latex/unnamed-chunk-9-2} }

}

\caption{幅と長さの関係}\label{fig:unnamed-chunk-9}
\end{figure}

実際にはこれだけではデータ分析はできませんので、分析対象を

これがデータサイエンスワークフロー（Data Science Workflow）と呼ばれる分析フローです。

\newpage

\hypertarget{data-science-workflow}{%
\section*{Data Science Workflow}\label{data-science-workflow}}
\addcontentsline{toc}{section}{Data Science Workflow}

データ分析の方法は様々ですが、そのプロセスは下図のように抽象化することができます。

\begin{figure}[H]

{\centering \includegraphics[width=1\linewidth,]{fig/data-science} 

}

\caption{Data Science Workflow, CC BY-NC-ND 3.0 US, Hadley Wickham}\label{fig:unnamed-chunk-11}
\end{figure}

この図は「Data Science Workflow」と呼ばれ、R コミュニティに多大な貢献をしている Hadley Wickham がその著書 \href{https://r4ds.had.co.nz/}{『R for Data Science』 } で提唱している概念図です。本書は、この Data Science Workflow に基づくページ構成になっており各プロセスのスコープ概略は下記の通りです。\\
　

\textbf{Program}\\
データ分析のすべてのプロセス（Tidy 〜 Communicate/Automate）で必要となるツールがプログラミングです。プログラミングを覚えることで効率的に分析処理を行えるようになります。

\textbf{Import}\\
分析対象となるデータを分析環境に取り込み分析をできるようにするのがインポートプロセスです。データは様々な形式（文字コード、ファイル形式など）で保存されていますので、それらに見合った方法でインポートする必要があります。\\
　\\
\textbf{Tidy}\\
インポートしたデータは必ずしもデータ分析に適した形式になっているとは限りませんので、一貫した形式（Tidy data）に整理します。 \href{}{Tidy data } はデータ分析において重要な概念です。\\
　\\
\textbf{Transform}\\
整理したデータ（Tidy data）がそのまま状態でデータ分析に使えることは稀です。不要なデータを削除したり（クレンジング）、必要なデータだけに絞り込んだり、新しい変数を計算したりする必要があります。\\
　\textbf{Tidy} プロセスと合わせて \textbf{Wrangle} や \textbf{Data wrangling}、前処理と呼ばれることもあります。\\
　\\
\textbf{Visualize}\\
データを可視化することは様々な示唆を得ることと同義といえます。分析方針を考えるためにもデータがどういう傾向をもっているのかを把握するためのプロセスともいえます。\\
　\\
\textbf{Model}\\
可視化で得られた情報を元に数式可（モデル化）するのプロセスです。モデルは様々な\\
　\\
\textbf{Communicate}\\
分析結果を他人に伝えるためのプロセスです。結果を他人に伝えるだけでは不十分で \href{}{再現可能性（Reproducible research） } が伴っていることも求められます。 　 　\href{http://www.igaku-shoin.co.jp/paperDetail.do?id=PA03357_03}{3つの再現可能性 }

\hypertarget{tidyverse-eco-system}{%
\section*{Tidyverse Eco System}\label{tidyverse-eco-system}}
\addcontentsline{toc}{section}{Tidyverse Eco System}

　このような Data Science Workflow を R で実現するための手段が Hadley Wickham により開発された tidyverse パッケージ群による Tidyverse Eco System です。tidyverse

\hypertarget{part-program}{%
\part{Program}\label{part-program}}

\hypertarget{ux5206ux6790ux74b0ux5883}{%
\chapter{分析環境}\label{ux5206ux6790ux74b0ux5883}}

R について学ぶ際には R が使えるような環境を構築しておくべきです。しかし、環境構築は初学者にとって最も厄介な作業でもあります。そこで、本書では環境構築の必要がない \href{}{{[}Google Colaboratory{]}} を利用します。R/RStudio 環境を構築できる方はそちらを利用しても構いません。

\hypertarget{r-ux306eux4e3bux306aux5206ux6790ux74b0ux5883}{%
\section{R の主な分析環境}\label{r-ux306eux4e3bux306aux5206ux6790ux74b0ux5883}}

\hypertarget{rr-commanderrcmdr}{%
\subsection{R/R Commander(Rcmdr)}\label{rr-commanderrcmdr}}

コードを記述する必要がない代わりに実行できる機能（関数）が限定され、GUI による対話形式で R を使えるのが \href{https://socialsciences.mcmaster.ca/jfox/Misc/Rcmdr/}{{[}R Commander（以降、Rcmdr）{]}}です。Rcmdr は R のパッケージとして提供されていますが、OS により使える機能（メニュー）が若干異なるようで、基本的には Windows 環境での利用をおすゝめします。ちなみに SQiP のメトリクス演習コースでは Rcmdr を利用してます。

\begin{figure}[H]

{\centering \includegraphics[width=0.85\linewidth,]{./fig/RCmdr} 

}

\caption{Rcmdr, Ubuntu}\label{fig:unnamed-chunk-12}
\end{figure}

\hypertarget{rrstudio-desktop}{%
\subsection{R/RStudio Desktop}\label{rrstudio-desktop}}

Rcmdr は簡単ですが実行できる機能（関数）が限定されていること、GUI による対話形式のため操作手順の記録が残しにくいなどの難点があります。それらを解決する統合開発環境（IDE）が RStudio です。RStudio は R の IDE におけるデファクトスタンダードであり

\begin{itemize}
\tightlist
\item
  R のコードを記述するのに適したエディタを備えている
\item
  R のパッケージをインストール・管理するためのパッケージマネージャを備えている
\item
  \href{https://rmarkdown.rstudio.com/}{{[}R Markdown{]}} や \href{https://pandoc.org/}{{[}Pandoc{]}} との連携による再現可能性を確保するための仕組みを備えている
\item
  外部リソースからのデータを取り込む仕組み（RStudio Connect）を備えている
\item
  複数の分析をプロジェクト単位で管理する仕組みを備えている
\item
  \href{https://git-scm.com/}{{[}Git{]}} などの外部プログラムと連携したソースの版管理の仕組みを備えている
\end{itemize}

という特徴があり、R を用いた分析に最も適した分析環境と言えます。RStudio にはインストール環境に応じた複数のリリース形態がありますが、その中でも Desktop は OS 上のアプリケーションとして動作するため最も利用しやすいと言えます。

\begin{figure}[H]

{\centering \includegraphics[width=0.85\linewidth,]{./fig/RStudio/DT} 

}

\caption{RStudio Desktop, Windows}\label{fig:unnamed-chunk-13}
\end{figure}

\hypertarget{rrstudio-server}{%
\subsection{R/RStudio Server}\label{rrstudio-server}}

RStudio Server はブラウザベースで動作する RStudio です。Linux 上で動作するサーバアプリケーションですが、Docker で動作させることも可能ですので複数の分析者で分析環境を統一したい場合などに適しています。

\hypertarget{rstudio-cloud}{%
\subsection{RStudio Cloud}\label{rstudio-cloud}}

クラウド版の RStudio が RStudio Cloud です。RStudio Server Pro ベースのクラウドサービスですので、任意のバージョンの R に切り替えて使うことも可能です。無料プランでは利用時間が限定される点に注意してください。

\begin{figure}[H]

{\centering \includegraphics[width=0.85\linewidth,]{./fig/RStudio/RSCloud_01} 

}

\caption{RStudio Cloud}\label{fig:unnamed-chunk-14}
\end{figure}

\hypertarget{google-colaboratoryr-engine}{%
\subsection{Google Colaboratory(R Engine)}\label{google-colaboratoryr-engine}}

Google Colaboratory（以降、Google Colab）は、Googleアカウントを持っていれば誰でも利用可能な Python 向けの開発環境である Jupyter Notebook サービスです。Jupyter Notebook は Python 以外に R をエンジンして利用することができるため、この機能を利用することで利用時間の制限なく R の分析環境として使うことができますので初学者の方には最も適した分析環境と言えます。

\begin{figure}[H]

{\centering \includegraphics[width=0.85\linewidth,]{./fig/Colab/Firsttime} 

}

\caption{Google Colab}\label{fig:unnamed-chunk-15}
\end{figure}

\hypertarget{rr-consoleeditorvisualstudio-code-gnu-emacs}{%
\subsection{R(R Console)/Editor(VisualStudio Code, GNU Emacs)}\label{rr-consoleeditorvisualstudio-code-gnu-emacs}}

R はインタプリタ（対話的に逐次実行する処理系）として提供されていますので、R 単体で動作させることが当然、可能です。単体で動作させた場合、ターミナルやコンソールと呼ばれるウィンドウベースで動作するため非常に使いにくい環境です。一方、プログラミングに慣れている方は自分の好みの使いなれたエディタで分析を行いたい場合が多いと思われます。 一部のエディタでは、このようば要望を満たすために R Conole との連携機能を提供しています。古くは Emacs 用の ESS や最近人気のある Microsoft の VisualStudio Code 用の機能拡張などが

\hypertarget{r-basics}{%
\chapter{R Basics}\label{r-basics}}

\begin{quote}
Rの一番良いところは統計学者が作っているところだ。 Rの一番悪いところは統計学者が作っているところだ。
\end{quote}

\href{https://www.slideshare.net/shuyo/r-4022379}{出典}

　と言われる R ですが、最たる特徴は統計処理に特化している点です。また、前出の Data Science Workflow 全体をカバーできるようになっており、データ構造の変換や特定の分析に対する数々のパッケージ、コマンド一つでグラフが描ける高度なグラフィクス、更には分析結果をレポーティングするための仕組みも用意されています。\\
　データ分析をひとつの言語で一気通貫できるので覚えることは非常に多岐に渡りますが、初学者が R を学ぶ際には、まず、「ベクトル演算」を理解するのが一つのポイントだと考えます。\\
　\\

　

\begin{figure}[H]

{\centering \includegraphics[width=0.9\linewidth,]{fig/tutorial_code} 

}

\caption{Google Colab での実行例}\label{fig:unnamed-chunk-16}
\end{figure}

　\\
　なお、チュートリアルを起動後、何も操作をしないで放置しておくと自動的にチュートリアルウィンドウがクローズします。クローズした場合は、再度、\textbf{\texttt{Run\ Document}} をクリックして再起動してください。\\
　

　以降、見出しの括弧内の英語はチュートリアルの見出しと対応しています。\\
　

\hypertarget{ux57faux672cux7684ux306aux6f14ux7b97basic-operations}{%
\section{基本的な演算（Basic Operations）}\label{ux57faux672cux7684ux306aux6f14ux7b97basic-operations}}

　まずは最も基本となる演算を行ってみましょう。

　

\hypertarget{ux7b97ux8853ux6f14ux7b97ux306eux57faux672c}{%
\subsection{算術演算の基本}\label{ux7b97ux8853ux6f14ux7b97ux306eux57faux672c}}

　算術演算の基本である加減乗除算の四則演算は他のプログラミング言語や OS に付属の電卓アプリなどと同じです。

　

\hypertarget{ux4ee3ux5165ux6f14ux7b97ux306eux57faux672c}{%
\subsection{代入演算の基本}\label{ux4ee3ux5165ux6f14ux7b97ux306eux57faux672c}}

　変数に演算結果を代入するには代入演算子（\texttt{\textless{}-}）を用います。変数を使うための変数宣言は不要です。また、代入結果を確認（表示）するためには変数名だけを記述して実行します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{w }\OtherTok{\textless{}{-}} \DecValTok{1} \SpecialCharTok{+} \DecValTok{2}
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{2} \SpecialCharTok{*} \DecValTok{3}
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{3} \SpecialCharTok{{-}} \DecValTok{4}
\NormalTok{z }\OtherTok{\textless{}{-}} \DecValTok{4} \SpecialCharTok{/} \DecValTok{5}
\end{Highlighting}
\end{Shaded}

　

\hypertarget{ux5909ux6570ux6f14ux7b97ux306eux57faux672c}{%
\subsection{変数演算の基本}\label{ux5909ux6570ux6f14ux7b97ux306eux57faux672c}}

　定数だけでなく変数同士、変数と定数の演算も可能です。ここでは変数同士および変数と定数の四則演算を行ってみます。

　さらに変数同士の演習結果を変数に代入してみます。代入前後で変数の値を確認して変数がどのように変化するかのかを合わせて確認します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{w}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{w }\OtherTok{\textless{}{-}}\NormalTok{ w }\SpecialCharTok{+}\NormalTok{ x}
\NormalTok{w}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\# Variables \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}
\end{Highlighting}
\end{Shaded}

　このように R での変数の扱いは非常にシンプルですが、簡単に変数を上書きできてしまう点に留意してください。

　

\hypertarget{ux4e88ux7d04ux8a9ereserved-word}{%
\section{予約語（Reserved word）}\label{ux4e88ux7d04ux8a9ereserved-word}}

　プログラミング言語には予約語（Reserved word）といわれるものがあり予約語は変数名として使えません。 R では以下が予約語になっています。

\texttt{if}, \texttt{else}, \texttt{for}, \texttt{while}, \texttt{repeat}, \texttt{in}, \texttt{next}, \texttt{break}, \texttt{function},\\
\texttt{TRUE}, \texttt{FALSE}, \texttt{NULL}, \texttt{NA}, \texttt{NaN}, \texttt{Inf}

　

\hypertarget{ux5909ux6570variables}{%
\section{変数（Variables）}\label{ux5909ux6570variables}}

　R での変数の扱い方について触れておきます。まず、変数名の命名規則ですが \href{https://style.tidyverse.org/syntax.html\#object-names}{スタイルガイド } に準拠して「英小文字、数字、アンダースコア」のみを使うことを推奨します。また、変数名は分かりやすい名称にするように心掛けてください。例えば

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{number\_int }\OtherTok{\textless{}{-}}\NormalTok{ 10L}
\NormalTok{number\_int}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 10
\end{verbatim}

　なお、数字から始まる変数名は R の仕様により使用することができません。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{1num }\OtherTok{\textless{}{-}} \DecValTok{100}
\NormalTok{2\_string }\OtherTok{\textless{}{-}} \StringTok{"foo"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Error: <text>:1:2:  想定外のシンボルです 
## 1: 1num
##      ^
\end{verbatim}

　また、予約語以外でも変数型や関数に使われているような名前を変数名にすることはおすゝめできません。

　

\hypertarget{ux30c7ux30fcux30bfux578b}{%
\subsection{データ型}\label{ux30c7ux30fcux30bfux578b}}

　他の言語でも同じですが変数には値を入れることができます。データ型はどのような値（データ）が入っているかを識別するためのものです。R の代表的なデータ型には以下のようなものがあります。

\begin{longtable}[]{@{}llllll@{}}
\toprule
型 & クラス & タイプ & モード & 格納モード & 備考 \\
\midrule
\endhead
実数型 & \texttt{numeric} & \texttt{double} & \texttt{numeric} & \texttt{double} & 倍精度浮動小数点 \\
整数型 & \texttt{integer} & \texttt{integer} & \texttt{numeric} & \texttt{integer} & \\
複素数型 & \texttt{complex} & \texttt{complex} & \texttt{complex} & \texttt{complex} & \\
論理型 & \texttt{logical} & \texttt{logical} & \texttt{logical} & \texttt{logical} & Boolean型 \\
文字型 & \texttt{character} & \texttt{character} & \texttt{character} & \texttt{character} & \\
日付型 & \texttt{Date} & \texttt{double} & \texttt{numeric} & \texttt{double} & Date型（POSIX型もあり） \\
\bottomrule
\end{longtable}

　R は開発の経緯から様々な型の見かたがありますが、基本的に同じようなものだとと考えてください。書籍などでよく出てくる \texttt{str}（structure）関数が返す型は上表におけるクラスです。

　

\hypertarget{ux5909ux6570ux578b}{%
\subsection{変数型}\label{ux5909ux6570ux578b}}

　前述のようなデータ型を持った値を入れる箱が変数です。変数には華表のような様々な形があります。中でも表形式のデータを扱えるデータフレーム型は R ならではの変数型といえます。また、R には他の言語ではよく見かけるスカラー型（一種類のデータ型の値を一つだけ格納できる変数型）はありません基本となる変数型はベクトル型になります。\\
　変数型にもクラスがありますが、ベクトル型変数のクラスはデータ型のクラスと同じです。\\
　

\begin{longtable}[]{@{}lll@{}}
\toprule
変数の型 & クラス & 説明 \\
\midrule
\endhead
ベクトル型 & データ型に同じ & 一種類のデータ型の値を任意の個数だけ格納できる変数型 \\
因子型 & \texttt{factor}, \texttt{ordered} & 水準インデックスを持ったベクトル型変数 \\
マトリクス型（行列型） & \texttt{matrix} & 二次元型の変数型（ベクトル型とは異なる型） \\
アレイ型（配列型） & \texttt{array} & 多次元型の変数（ベクトル型とは異なる型） \\
データフレーム型 & \texttt{data.frame} & データ型の異なる複数の\textbf{等長}ベクトル型を格納できる変数型 \\
リスト型 & \texttt{list} & データ型の異なる複数のベクトル型変数を格納できる変数型 \\
\bottomrule
\end{longtable}

　

\hypertarget{ux30d9ux30afux30c8ux30ebux578b}{%
\subsection{ベクトル型}\label{ux30d9ux30afux30c8ux30ebux578b}}

　ベクトル型は前述のように最も基本となる変数型です。ベクトル型変数を作成するには \texttt{c} 関数使います。代入して \texttt{str} 関数でクラス、長さ（値の個数）と値を確認してみます。\\
　長さが \(1\) の場合は \texttt{c} 関数を省略できます。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ 2L                   }\CommentTok{\# 一つだけ代入（格納）する場合 \textasciigrave{}c\textasciigrave{} は省略可能です}
\FunctionTok{str}\NormalTok{(x)                    }\CommentTok{\# 値が一つだけの場合は長さ表示が省略されます}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  int 2
\end{verbatim}

　

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)           }\CommentTok{\# 実数の 1 から 3 の三つの値が代入されます}
\FunctionTok{str}\NormalTok{(x)                    }\CommentTok{\# []の部分が長さ表示です}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  num [1:3] 1 2 3
\end{verbatim}

　文字（型）を代入する場合はクォート（ダブルまはたシングル）で囲みます。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"1"}\NormalTok{, }\StringTok{\textquotesingle{}2\textquotesingle{}}\NormalTok{, }\StringTok{"3"}\NormalTok{)     }\CommentTok{\# 文字として数字を代入してみます}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  chr [1:3] "1" "2" "3"
\end{verbatim}

　では文字（型）と数字（型）を混在させたらどうなるでしょう？

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(1L, }\DecValTok{2}\NormalTok{, }\StringTok{"3"}\NormalTok{)        }\CommentTok{\# 整数、実数、文字としての数字を代入してみます}
\FunctionTok{str}\NormalTok{(x)                    }\CommentTok{\# 強制型変換により最も柔軟度の高い文字型になります}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  chr [1:3] "1" "2" "3"
\end{verbatim}

　エラーにはならずベクトル型変数は文字型クラスとして作成されます。これは強制型変換という処理が行われるためです。強制型変換は複数のデータ型が混在した場合により柔軟度の高いデータ型に変換する処理です。論理型、整数型、実数型、複素数型、文字型の順に変換されます。\\
　便利ではありますが意図しない結果を招く可能性がありますので、このような変換があることは覚えておいてください。

　

\hypertarget{ux56e0ux5b50ux578b}{%
\subsection{因子型}\label{ux56e0ux5b50ux578b}}

　因子型は名義尺度や順序尺度の変数を扱うのに便利な変数型です。因子型を作成するには \texttt{factor} 関数を使う順序なしの因子型と \texttt{ordered} 関数を使う順序ありの因子型があります。どちらも \texttt{levels}（水準） という属性がついているベクトル型です。\\
　後述のデータフレーム型の中で使うと「層別」という処理が楽になります。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"O"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{))}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  Factor w/ 4 levels "A","AB","B","O": 1 3 2 4 1 1 1 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{levels}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "A"  "AB" "B"  "O"
\end{verbatim}

　\texttt{ordered} 型は \texttt{levels} に順序がついている点が \texttt{factor} 型と異なる点です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{ordered}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"O"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{))}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  Ord.factor w/ 4 levels "A"<"AB"<"B"<"O": 1 3 2 4 1 1 1 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{levels}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "A"  "AB" "B"  "O"
\end{verbatim}

　

\hypertarget{ux30deux30c8ux30eaux30afux30b9ux578b}{%
\subsection{マトリクス型}\label{ux30deux30c8ux30eaux30afux30b9ux578b}}

　マトリクス型は文字通り二次元配列を扱うための変数型です。作成するには \texttt{matrix} 関数を利用します。引数のベクトル型を列方向から二次元に展開します。

　展開方向を変えるには \texttt{byrow} オプションを指定します。

　数値だけでなく文字列も扱えます。

　

\hypertarget{ux30a2ux30ecux30a4ux578b}{%
\subsection{アレイ型}\label{ux30a2ux30ecux30a4ux578b}}

　アレイ型は多次元配列を扱うのに便利な変数型です。作成するには \texttt{array} 関数を利用します。第一引数で指定したベクトル型のデータを第二引数で指定した構造（行, 列, 次元）にしたがって展開します。\\
　展開は列方向のみで \texttt{matrix} 型にある \texttt{byrow} オプションはありません。また、第一引数のデータ数が足りない場合は先頭からリサイクルして展開します。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{array}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{12}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
\end{verbatim}

　

\hypertarget{ux30c7ux30fcux30bfux30d5ux30ecux30fcux30e0ux578b}{%
\subsection{データフレーム型}\label{ux30c7ux30fcux30bfux30d5ux30ecux30fcux30e0ux578b}}

　データフレーム型は表形式のデータを扱うのに非常に便利な変数型です。列ごとに異なるデータ型の変数を格納することが可能ですので、データベースのテーブルのようなものです。ただし、全ての列において行数が同一でなければなりません。データフレーム型を作成するには \texttt{data.frame} 関数を用います。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{col1 =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{), }\AttributeTok{col2 =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"C"}\NormalTok{, }\StringTok{"D"}\NormalTok{, }\StringTok{"E"}\NormalTok{),}
                \AttributeTok{col3 =} \FunctionTok{c}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{11}\NormalTok{, }\DecValTok{12}\NormalTok{, }\DecValTok{13}\NormalTok{, }\DecValTok{14}\NormalTok{), }\AttributeTok{col4 =} \FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{))}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 'data.frame':    5 obs. of  4 variables:
##  $ col1: int  1 2 3 4 5
##  $ col2: chr  "A" "B" "C" "D" ...
##  $ col3: num  10 11 12 13 14
##  $ col4: logi  TRUE TRUE FALSE TRUE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   col1 col2 col3  col4
## 1    1    A   10  TRUE
## 2    2    B   11  TRUE
## 3    3    C   12 FALSE
## 4    4    D   13  TRUE
## 5    5    E   14 FALSE
\end{verbatim}

　データフレーム型は列名を指定することが可能です。また、文字型のデータはデフォルトで因子型変数として扱われます。

　

\hypertarget{ux30eaux30b9ux30c8ux578b}{%
\subsection{リスト型}\label{ux30eaux30b9ux30c8ux578b}}

　リスト型はデータフレーム型とは異なり不等長のベクトル型変数を格納できる変数型です。ベクトル型の他にもマトリクス型やデータフレーム型、リスト型地震を格納できる非常に柔軟な構造であるため様々な関数あが返り値と使っています。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\FloatTok{0.5}\SpecialCharTok{:}\FloatTok{5.5}\NormalTok{), }\FunctionTok{seq}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{4}\NormalTok{, }\FloatTok{0.2}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"O"}\NormalTok{), x)}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## List of 5
##  $ : int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ : num [1:6] 0.5 1.5 2.5 3.5 4.5 5.5
##  $ : num [1:16] 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 ...
##  $ : chr [1:4] "A" "B" "AB" "O"
##  $ :'data.frame':    5 obs. of  4 variables:
##   ..$ col1: int [1:5] 1 2 3 4 5
##   ..$ col2: chr [1:5] "A" "B" "C" "D" ...
##   ..$ col3: num [1:5] 10 11 12 13 14
##   ..$ col4: logi [1:5] TRUE TRUE FALSE TRUE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1]]
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## [[2]]
## [1] 0.5 1.5 2.5 3.5 4.5 5.5
## 
## [[3]]
##  [1] 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0 3.2 3.4 3.6 3.8 4.0
## 
## [[4]]
## [1] "A"  "B"  "AB" "O" 
## 
## [[5]]
##   col1 col2 col3  col4
## 1    1    A   10  TRUE
## 2    2    B   11  TRUE
## 3    3    C   12 FALSE
## 4    4    D   13  TRUE
## 5    5    E   14 FALSE
\end{verbatim}

　

\hypertarget{ux5b9aux6570constant}{%
\section{定数（Constant）}\label{ux5b9aux6570constant}}

　変数はその名の通り値を変更できますが、R には特別な意味を持った値を保持するための定数があります。なお、定数にもクラスがあります。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
定数 & クラス \\
\midrule
\endhead
\texttt{TRUE} & \texttt{logical} \\
\texttt{FALSE} & \texttt{logical} \\
\texttt{NULL} & \texttt{NULL} \\
\texttt{NA} & \texttt{logical} \\
\texttt{NaN} & \texttt{numeric} \\
\texttt{Inf} & \texttt{numeric} \\
\bottomrule
\end{longtable}

　\\
　\texttt{NULL} を除く定数はデータ型のクラスですので強制型変換の対象となります。以下のような変換が行われますので注意してください。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(10L, }\FloatTok{2.5}\NormalTok{, }\DecValTok{3} \SpecialCharTok{+}\NormalTok{ 4i, }\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{NaN}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\ConstantTok{Inf}\NormalTok{, }\SpecialCharTok{{-}}\ConstantTok{Inf}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 10.0+0i  2.5+0i  3.0+4i  1.0+0i  NaN+0i      NA  Inf+0i -Inf+0i
\end{verbatim}

　

\hypertarget{na-ux306eux578b}{%
\subsection{\texorpdfstring{\texttt{NA} の型}{NA の型}}\label{na-ux306eux578b}}

　欠損値を示す\texttt{NA}には明示的にデータ型を示すためのバリエーションがあります。関数によっては明示的に \texttt{NA} を指定する必要がありますので覚えておいてください。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
NA & データ型 \\
\midrule
\endhead
NA\_integer\_ & 整数型 \\
NA\_real\_ & 実数型 \\
NA\_complex\_ & 複素数型 \\
NA\_character\_ & 文字型 \\
\bottomrule
\end{longtable}

　

\hypertarget{ux53c2ux7167ux30a2ux30afux30bbux30b9access-operators}{%
\section{参照・アクセス（Access Operators）}\label{ux53c2ux7167ux30a2ux30afux30bbux30b9access-operators}}

　変数の中の値を参照する方法は変数型により多少異なりますが、基本的には参照演算子またはアクセス演算子と呼ばれる \texttt{{[}} や \texttt{\$} を用います。

　

\hypertarget{ux6f14ux7b97ux5b50}{%
\subsection{\texorpdfstring{\texttt{{[}} 演算子}{{[} 演算子}}\label{ux6f14ux7b97ux5b50}}

　\texttt{{[}} 演算子はベクトル型系の要素を参照するための演算子です。例えば \(5\) 番目の値を参照するには以下のようにします。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  1  2  3  4  5  6  7  8  9 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{5}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 5
\end{verbatim}

　マトリクス型では、行・列・セルの三通りの参照が可能です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{12}\NormalTok{), }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{1}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  1  4  7 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[, }\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 8
\end{verbatim}

　\\
　アレイ型でも同様の参照が可能です。ただし、マトリクス型とは異なり次元が絡んできますので、表示は少しややこしくなります。以下の \(2 \times 2\) の \(4\) 次元アレイで説明します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{array}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{16}\NormalTok{), }\AttributeTok{dim =} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{4}\NormalTok{))}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## , , 1
## 
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8
## 
## , , 3
## 
##      [,1] [,2]
## [1,]    9   11
## [2,]   10   12
## 
## , , 4
## 
##      [,1] [,2]
## [1,]   13   15
## [2,]   14   16
\end{verbatim}

　第 \(1\) 次元を参照します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[, , }\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
\end{verbatim}

　第 \(1\) 次元の \(1\) 行目を参照します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{1}\NormalTok{, , }\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 3
\end{verbatim}

　第 \(1\) 次元の \(1\) 列目を参照します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[,}\DecValTok{1}\NormalTok{ , }\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2
\end{verbatim}

　全次元の \(1\) 行目を参照します。参照結果は列が各次元になる点に注意してください。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{1}\NormalTok{, , ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1] [,2] [,3] [,4]
## [1,]    1    5    9   13
## [2,]    3    7   11   15
\end{verbatim}

　全次元の \(1\) 列目を参照します。行の参照と同様に参照結果は列が各次元になります。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[, }\DecValTok{1}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      [,1] [,2] [,3] [,4]
## [1,]    1    5    9   13
## [2,]    2    6   10   14
\end{verbatim}

　全次元の \(1\) 行 \(1\) 列目を参照します。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  1  5  9 13
\end{verbatim}

　

\hypertarget{ux6f14ux7b97ux5b50-1}{%
\subsection{\texorpdfstring{\texttt{\$} 演算子}{\$ 演算子}}\label{ux6f14ux7b97ux5b50-1}}

　\texttt{\$} 演算子はデータフレーム型やリスト型の要素を参照するための演算子です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{blood =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"O"}\NormalTok{, }\StringTok{"A"}\NormalTok{), }\AttributeTok{age =} \FunctionTok{c}\NormalTok{(}\DecValTok{18}\NormalTok{, }\DecValTok{25}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{35}\NormalTok{, }\DecValTok{19}\NormalTok{))}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   blood age
## 1     A  18
## 2     B  25
## 3     A  22
## 4     O  35
## 5     A  19
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}\SpecialCharTok{$}\NormalTok{blood}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "A" "B" "A" "O" "A"
\end{verbatim}

　さらに要素内を参照するには前述の \texttt{{[}} 演算子と組み合わせます。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}\SpecialCharTok{$}\NormalTok{blood[}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "A"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\# Operators \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}
\end{Highlighting}
\end{Shaded}

　リスト型を \texttt{\$} 演算子で参照するの場合は 要素が \texttt{names} 属性を持っていることが前提です。以下のリスト型変数では \texttt{\$} 表示の後ろに要素名が表示されいている \texttt{blood}, \texttt{data} が \texttt{\$} 演算子で参照可能です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\AttributeTok{blood =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"O"}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"M"}\NormalTok{, }\StringTok{"F"}\NormalTok{),}
          \AttributeTok{data =} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{blood =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"O"}\NormalTok{, }\StringTok{"A"}\NormalTok{),}
                            \AttributeTok{age =} \FunctionTok{c}\NormalTok{(}\DecValTok{18}\NormalTok{, }\DecValTok{25}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{35}\NormalTok{, }\DecValTok{19}\NormalTok{)))}
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## List of 3
##  $ blood: chr [1:4] "A" "B" "AB" "O"
##  $      : chr [1:2] "M" "F"
##  $ data :'data.frame':   5 obs. of  2 variables:
##   ..$ blood: chr [1:5] "A" "B" "A" "O" ...
##   ..$ age  : num [1:5] 18 25 22 35 19
\end{verbatim}

　要素名が表示されていない二番目の要素を参照するには \texttt{{[}{[}} 演算子を用います。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[[}\DecValTok{2}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "M" "F"
\end{verbatim}

　さらに要素内の値を参照する場合は前述のデータフレーム型同様に \texttt{{[}} 演算子を用います。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x}\SpecialCharTok{$}\NormalTok{blood[}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "B"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[[}\DecValTok{2}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "M"
\end{verbatim}

　

\hypertarget{ux691cux67fbux5909ux63db}{%
\section{検査・変換}\label{ux691cux67fbux5909ux63db}}

　R では変数内に複数のデータ型が混在している場合は前述のように強制型変換が行われますので、タイポなどがあると知らぬ間に意図しないデータ型になっていることがあります。作成した変数のデータ型を検査するために \texttt{is.} 関数群が用意されています。\\
　

\begin{longtable}[]{@{}lll@{}}
\toprule
データ型 & 関数 & 備考 \\
\midrule
\endhead
論理型 & \texttt{is.logical} & \\
整数型 & \texttt{is.integer} & \\
実数型 & \texttt{is.double} & \\
数値型 & \texttt{is.numeric} & 整数型または実数型の場合 \texttt{TRUE} \\
複素数型 & \texttt{is.complex} & \\
文字型 & \texttt{is.character} & \\
\bottomrule
\end{longtable}

　\\
　同様に変数型を検査するための \texttt{is.} 関数軍も用意されています。\\
　

\begin{longtable}[]{@{}lll@{}}
\toprule
変数型 & 関数 & 備考 \\
\midrule
\endhead
ベクトル型 & \texttt{is.vector} & \\
因子型 & \texttt{is.factor} or \texttt{is.ordered} & \\
マトリクス型 & \texttt{is.matrix} & \\
アレイ型 & \texttt{is.array} & \\
データフレーム型 & \texttt{is.data.frame} & \\
リスト型 & \texttt{is.list} & \\
\bottomrule
\end{longtable}

　\\
　定数用の \texttt{is.} 関数群もあります。\\
　

\begin{longtable}[]{@{}lll@{}}
\toprule
定数 & 関数 & 備考 \\
\midrule
\endhead
\texttt{NULL} & \texttt{id.null} & NULL値か否か \\
\texttt{NA} & \texttt{is.na} & 欠損値か否か \\
\texttt{NaN} & \texttt{is.nan} & 非数か否か \\
\texttt{inf} & \texttt{is.infinit} & 無現値か否か（有限値か否かを確認する \texttt{is.finit} 関数もあり） \\
\bottomrule
\end{longtable}

　

\hypertarget{ux6f14ux7b97ux5b50operators}{%
\section{演算子（Operators）}\label{ux6f14ux7b97ux5b50operators}}

　R はベクトル演算が可能ですので演算子は基本的にベクトル演算に対応しています。\\
　演算子は単項演算子と二項演算子に大別できます。二項演算子には算術演算子、比較演算子、論理演算子、特殊演算子があります。等長のベクトル型変数どうし、もしくは、ベクトル型変数とスカラ型変数の間の演算が可能です。不等長のベクトル変数に対して二項演算子を利用した場合、足りない値は先頭からリサイクルされて演算されます。条件によってはワーニングも表示されませんので不等長のベクトル演算は注意してください。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) }\SpecialCharTok{*} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  1  4  3  8  5 12  7 16  9 20
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) }\SpecialCharTok{*} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  1  4  9  4 10 18  7 16 27 10
\end{verbatim}

　\\
、 \#\#\# 単項演算子 　単項演算子は文字通り単項に作用する演算子です。単項演算子には算術演算子の \texttt{-}（マイナス）と論理型演算子の \texttt{!}（否定, NOT）があります。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 2 3 4 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] -1 -2 -3 -4 -5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1]  TRUE  TRUE  TRUE FALSE  TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{!}\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE FALSE FALSE  TRUE FALSE
\end{verbatim}

　

\hypertarget{ux7b97ux8853ux6f14ux7b97ux5b50}{%
\subsection{算術演算子}\label{ux7b97ux8853ux6f14ux7b97ux5b50}}

　算術演算子は基本中の基本とも言える四則演算子である加算、減算、乗算、除算、ならびに、べき算（べき乗算）、整数除算（商、剰余）の六つの演算子があります。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\NormalTok{b }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{1}\NormalTok{)}
\NormalTok{a}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  1  2  3  4  5  6  7  8  9 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] 10  9  8  7  6  5  4  3  2  1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{+}\NormalTok{ b         }\CommentTok{\# 加算}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] 11 11 11 11 11 11 11 11 11 11
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{{-}}\NormalTok{ b         }\CommentTok{\# 減算}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] -9 -7 -5 -3 -1  1  3  5  7  9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{*}\NormalTok{ b         }\CommentTok{\# 乗算}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] 10 18 24 28 30 30 28 24 18 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{/}\NormalTok{ b         }\CommentTok{\# 除算}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  0.1000000  0.2222222  0.3750000  0.5714286  0.8333333  1.2000000
##  [7]  1.7500000  2.6666667  4.5000000 10.0000000
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\^{}}\NormalTok{ b         }\CommentTok{\# べき乗算}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]     1   512  6561 16384 15625  7776  2401   512    81    10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\%/\%}\NormalTok{ b       }\CommentTok{\# 整数除算（商）}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  0  0  0  0  0  1  1  2  4 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\%\%}\NormalTok{ b        }\CommentTok{\# 整数除算（剰余）}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] 1 2 3 4 5 1 3 2 1 0
\end{verbatim}

　

\hypertarget{ux6bd4ux8f03ux6f14ux7b97ux5b50-logical-operations}{%
\subsection{比較演算子 Logical Operations}\label{ux6bd4ux8f03ux6f14ux7b97ux5b50-logical-operations}}

　比較演算子は関係演算子とも呼ばれ、二変数の関係を調べる演算子です。同値関係を調べる等号記号や大小関係を調べる不等号などがこれにあたります。返り値は論理型となります。

\begin{longtable}[]{@{}llllll@{}}
\toprule
小なり & 大なり & 小なりイコール & 大なりイコール & イコール & ノットイコール \\
\midrule
\endhead
\texttt{\textless{}} & \texttt{\textgreater{}} & \texttt{\textless{}=} & \texttt{\textgreater{}=} & \texttt{==} & \texttt{!=} \\
\bottomrule
\end{longtable}

　例えば以下の二つのベクトル型変数に対する比較を行ってみます。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  1  2  3  4  5  6  7  8  9 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] 10  9  8  7  6  5  4  3  2  1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\textless{}}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\textgreater{}}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\textless{}=}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{\textgreater{}=}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{==}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a }\SpecialCharTok{!=}\NormalTok{ b}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
\end{verbatim}

　

\hypertarget{ux8ad6ux7406ux6f14ux7b97ux5b50-boolean-operations}{%
\subsection{論理演算子 Boolean Operations}\label{ux8ad6ux7406ux6f14ux7b97ux5b50-boolean-operations}}

　論理演算子はブール関数を評価するものです。論理積（AND）・論理和（OR）は演算対象により二種類の演算子があります。 　

\begin{longtable}[]{@{}lll@{}}
\toprule
演算 & 演算子 & 説明 \\
\midrule
\endhead
論理積 & \texttt{\&} & AND（ベクトル演算用） \\
論理和 & \texttt{\textbar{}} & OR,（ベクトル演算用） \\
排他的論理和 & \texttt{xor} & eXclusive OR（ベクトル演算用） \\
否定 & \texttt{!} & NOT（単項演算子, ベクトル演算可） \\
論理積 & \texttt{\&\&} & 条件式における論理積 \\
論理和 & \texttt{\textbar{}\textbar{}} & 条件式における論理和 \\
\bottomrule
\end{longtable}

　

\hypertarget{ux7279ux6b8aux6f14ux7b97ux5b50}{%
\subsection{特殊演算子}\label{ux7279ux6b8aux6f14ux7b97ux5b50}}

　特殊演算子は\texttt{\%}文字と\texttt{\%}文字で挟まれた演算子です。算術演算子の整数除算（商、剰余）厳密にいえば特殊演算子になりますが本資料では算術演算子として記載しています。\\
　R では特殊演算子を用いて任意の演算を定義することができます。パッケージによっては特殊演算子を用意している場合もあります。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
特殊演算子 & 演算内容 \\
\midrule
\endhead
\texttt{\%*\%} & 内積（スカラー積） \\
\texttt{\%in\%} & マッチング \\
\texttt{\%o\%} & 外積（ベクトル積） \\
\texttt{\%x\%} & クロネッカー積 \\
\bottomrule
\end{longtable}

　

\hypertarget{ux6f14ux7b97ux5b50ux306eux512aux5148ux9806ux4f4d}{%
\subsection{演算子の優先順位}\label{ux6f14ux7b97ux5b50ux306eux512aux5148ux9806ux4f4d}}

　演算子の優先順位は下表の通りとなります。優先順位を変えたい場合は数学と同様に \texttt{()} を利用して明示的に優先順位を指定をしてください。下記以外はヘルプで \texttt{Syntax} を検索すると確認できます。

\begin{longtable}[]{@{}lll@{}}
\toprule
演算子 & 説明 & 順位 \\
\midrule
\endhead
\texttt{::} & 名前空間へのアクセス & 高 \\
\texttt{\$} & 要素へのアクセス（データフレーム型、リスト型） & \\
\texttt{{[}{]}}, \texttt{{[}{[}{]}{]}} & 要素へのアクセス（ベクトル型、マトリクス型、アレイ型、リスト型） & \\
\texttt{\^{}} & べき乗 & \\
\texttt{-} & マイナス（単項演算子、\texttt{+}も使用可） & \\
\texttt{:} & 等差数列（c(1:10）のような数列） & \\
\texttt{\%\%} & 特殊演算子（二項演算子） & \\
\texttt{*}, \texttt{/} & 乗算、除算（二項演算子） & \\
\texttt{+}, \texttt{-} & 加算、減算（二項演算子） & \\
\texttt{\textless{}}, \texttt{\textgreater{}}, \texttt{\textless{}=}, \texttt{\textgreater{}=} & 比較演算子（大小関係） & \\
\texttt{==}, \texttt{!=} & 比較演算子（同値関係、大小関係と優先順位は同列） & \\
\texttt{!} & 否定（単項演算子） & \\
\texttt{\&}, \texttt{\&\&}, \texttt{\textbar{}}, \texttt{\textbar{}\textbar{}} & 論理積、論理和（論理演算子） & \\
\texttt{\textasciitilde{}} & フォーミュラ & \\
\texttt{\textless{}-} & 代入 & 低 \\
\bottomrule
\end{longtable}

　

\hypertarget{ux5236ux5fa1ux6587}{%
\section{制御文}\label{ux5236ux5fa1ux6587}}

　制御文はプログラムの流れをコントロールするためのもので大抵の言語で予約語になっています。制御文には条件分岐と繰り返し（ループ）の二種類があります。

　

\hypertarget{ux6761ux4ef6ux5206ux5c90}{%
\subsection{条件分岐}\label{ux6761ux4ef6ux5206ux5c90}}

　条件分岐には以下のようなものがあります。その他、パッケージなどで条件分岐のための関数が提供されています。

\begin{longtable}[]{@{}ll@{}}
\toprule
文・関数 & 説明 \\
\midrule
\endhead
\texttt{if\ else} & 基本的な条件分岐（予約語） \\
\texttt{switch} & 条件が多数に分岐する場合に便利（予約語） \\
\texttt{ifelse} & ExcelのIF関数に似た条件分岐（関数） \\
\bottomrule
\end{longtable}

　

\hypertarget{if-else}{%
\subsection{if, else}\label{if-else}}

　\texttt{if} 文と \texttt{else} 文は最も基本的な条件分岐です。評価式には論理演算子または論理型変数を用います。コーディングスタイルとして以下のどちらも可能です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \ConstantTok{FALSE}

\ControlFlowTok{if}\NormalTok{ (x }\SpecialCharTok{!=} \ConstantTok{TRUE}\NormalTok{) }\FunctionTok{print}\NormalTok{(}\StringTok{"TRUE"}\NormalTok{) }\ControlFlowTok{else} \FunctionTok{print}\NormalTok{(}\StringTok{"FALSE"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "TRUE"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{if}\NormalTok{ (x }\SpecialCharTok{==} \ConstantTok{TRUE}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"TRUE"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"FALSE"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "FALSE"
\end{verbatim}

　\texttt{if} 文は入れ子にしたり \texttt{else\ if} 文として組み合わせて使うことも可能です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ 10L}
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{5}

\ControlFlowTok{if}\NormalTok{ ((x }\SpecialCharTok{\textgreater{}} \DecValTok{5}\NormalTok{) }\SpecialCharTok{\&\&}\NormalTok{ (y }\SpecialCharTok{\textless{}}\NormalTok{ x)) \{}
   \FunctionTok{print}\NormalTok{(}\StringTok{"match, (x \textgreater{} 5) \&\& (y \textless{} x)"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ ((x }\SpecialCharTok{\textgreater{}} \DecValTok{5}\NormalTok{) }\SpecialCharTok{\&\&}\NormalTok{ (y }\SpecialCharTok{\textgreater{}=}\NormalTok{ x)) \{}
   \FunctionTok{print}\NormalTok{(}\StringTok{"match, (x \textgreater{} 5) \&\& (y \textgreater{}= x)"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
   \FunctionTok{print}\NormalTok{(}\StringTok{"else"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "match, (x > 5) && (y < x)"
\end{verbatim}

　

\hypertarget{switch}{%
\subsection{switch}\label{switch}}

　分岐する条件の数が多い場合は\texttt{if}文でなく\texttt{switch}*文を利用するのが便利です。\texttt{if}文と同じで評価式は\texttt{TRUE}か\texttt{FALSE}が単一で返るようにしなければなりません。注意しなければならないのは、引数により構文が異なる点です。\\
　

\hypertarget{ux5f15ux6570ux304cux6574ux6570ux306eux5834ux5408}{%
\subsubsection{引数が整数の場合}\label{ux5f15ux6570ux304cux6574ux6570ux306eux5834ux5408}}

　引数に整数 \(n\) を指定した場合、\(n\) 番目の処理文の結果が返ります。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{2}
\ControlFlowTok{switch}\NormalTok{(x,                 }\CommentTok{\# 分岐のための引数}
       \StringTok{"x is 1"}\NormalTok{,          }\CommentTok{\# 1番目の処理文}
       \StringTok{"x is 2"}\NormalTok{,          }\CommentTok{\# 2番目の処理文}
       \StringTok{"Error"}\NormalTok{)           }\CommentTok{\# 3番目の処理文}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "x is 2"
\end{verbatim}

　注意しなければならないのは条件分岐数と一致しない場合は \texttt{NULL} が返される点です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}}\NormalTok{ 5L}
\FunctionTok{is.null}\NormalTok{(}\ControlFlowTok{switch}\NormalTok{(x,         }\CommentTok{\# 分岐のための引数}
               \StringTok{"x is 1"}\NormalTok{,  }\CommentTok{\# 1番目の処理文}
               \StringTok{"x is 2"}\NormalTok{,  }\CommentTok{\# 2番目の処理文}
               \StringTok{"Error"}\NormalTok{))  }\CommentTok{\# 3番目の処理文}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

　

\hypertarget{ux5f15ux6570ux304cux6587ux5b57ux306eux5834ux5408}{%
\subsubsection{引数が文字の場合}\label{ux5f15ux6570ux304cux6587ux5b57ux306eux5834ux5408}}

　一方、引数が文字の場合、\texttt{if/else} 文と同様の処理が行われます。\texttt{if/else} 文と異なるのは \texttt{else} 文に相当する分岐が途中になっていても正しく処理してくれる点です。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \StringTok{"2"}
\ControlFlowTok{switch}\NormalTok{(x,}
       \StringTok{"1"} \OtherTok{=} \StringTok{"x is 1"}\NormalTok{,    }\CommentTok{\# 引数が"1"と一致する場合（\textasciigrave{}if (x == "1")\textasciigrave{} に等価）}
       \StringTok{"x is others"}\NormalTok{,     }\CommentTok{\# 一致するものがない場合（\textasciigrave{}else\textasciigrave{} に等価）}
       \StringTok{"2"} \OtherTok{=} \StringTok{"x is 2"}\NormalTok{)    }\CommentTok{\# 引数が"2"と一致する場合（\textasciigrave{}if (x == "2")\textasciigrave{} に等価）}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "x is 2"
\end{verbatim}

　\\
　引数に整数を指定しても動作しますが、引数が整数の場合と同様の動きをします。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{3}
\ControlFlowTok{switch}\NormalTok{(x,                 }\CommentTok{\# 分岐のための引数が整数になると}
       \StringTok{"1"} \OtherTok{=} \StringTok{"x is 1"}\NormalTok{,    }\CommentTok{\# 1番目の処理文}
       \StringTok{"x is others"}\NormalTok{,     }\CommentTok{\# 2番目の処理文}
       \StringTok{"2"} \OtherTok{=} \StringTok{"x is 2"}\NormalTok{)    }\CommentTok{\# 3番目の処理文}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "x is 2"
\end{verbatim}

　

\hypertarget{ifelse}{%
\subsection{ifelse}\label{ifelse}}

　\texttt{base::ifelse} は予約語でなく関数です。\texttt{if/else} 文と異なるのはベクトル型の評価が一度に行える点です。第一引数に \texttt{TRUE} か \texttt{FALSE} が返る評価式であればベクトル型でも構いません。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ifelse}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

　

\hypertarget{ux7e70ux308aux8fd4ux3057}{%
\subsection{繰り返し}\label{ux7e70ux308aux8fd4ux3057}}

　繰り返しは文字通り処理を任意の回数繰り返す場合に用いるもので予約語になっています。繰り返し文の処理は時間がかかるため R においては好ましくなく繰り返しは使わずベクトル演算で処理すべきと言われていますが、R-3.4.0 から JIT コンパイラと呼ばれる繰り返し処理の高速化がデフォルトで有効化されており今後は処理記述の流れが変わる可能性があります。処理の高速化についてはこちらの \href{http://masato-613.hatenablog.com/entry/2017/04/25/064632}{参考資料 } で確認してください。なお、繰り返し処理で注意すべき点は繰り返し文中では明示的に出力を指定しないと出力がなされない点です。

　

\begin{longtable}[]{@{}ll@{}}
\toprule
文 & 説明 \\
\midrule
\endhead
\texttt{for} & 条件式に与えたベクトルやリストが空になるまで任意の回数繰り返す \\
\texttt{while} & 条件式に与えた条件が成立している限り繰り返す \\
\texttt{repeat} & 無限に繰り返すが繰り返し処理中の\texttt{break}文で繰り返しを終了できる \\
\bottomrule
\end{longtable}

　\\
また、繰り返しを条件式以外で変更する処理用の文として以下が用意されています。これらも予約語です。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
文 & 説明 \\
\midrule
\endhead
\texttt{next} & この文が実行された時点で強制的に次の繰り返し処理に入ります \\
\texttt{break} & この文が実行された時点で繰り返し処理を終了します \\
\bottomrule
\end{longtable}

　

\hypertarget{for}{%
\subsection{for}\label{for}}

　\texttt{for}文は最も基本となる繰り返し処理で、条件式としてベクトルやリストを指定できる点が他の言語と異なる点です。

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\DecValTok{9}\SpecialCharTok{:}\DecValTok{15}\NormalTok{)) \{}
  \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{==} \DecValTok{4}\NormalTok{) \{}
    \ControlFlowTok{next}
\NormalTok{  \} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\textgreater{}=} \DecValTok{10}\NormalTok{) \{}
    \ControlFlowTok{break}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{print}\NormalTok{(}\FunctionTok{as.character}\NormalTok{(i))}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "1"
## [1] "2"
## [1] "3"
## [1] "5"
## [1] "7"
## [1] "9"
\end{verbatim}

　

\hypertarget{while-repeat}{%
\subsection{while, repeat}\label{while-repeat}}

　\texttt{while}文と\texttt{repeat}文については、あまり使うこともないと思いますので省略します。

　

\hypertarget{part-wrangle}{%
\part{Wrangle}\label{part-wrangle}}

\hypertarget{import}{%
\chapter{Import}\label{import}}

　Import は

\begin{quote}
　Google Colab を利用する場合は［＋コード］（［Ctrl］+［M］+［Ctrl］+［B］）ボタンでコードを追加してコードブロックを挿入してからコードを記載します。コードブロックの移動や削除はブロック右側に表示されているサブメニューで行います。［＋テキスト］ボタンでテキストブロックを挿入すればコメントなどを書き込むことができます。
\end{quote}

　

\begin{quote}
　RStudio を利用する場合はメニューから［File］-［New File］-［R Notebook］を実行してR Notebook を作成します。キーボードショートカット［Ctrl/Cmd］+［Alt/Option］+［I］でコードチャンクを挿入しチャンクにコードを記述します。チャング以外にコメントなどを書き込むことができます。
\end{quote}

　

\hypertarget{readr}{%
\section{readr}\label{readr}}

\hypertarget{readxl}{%
\section{readxl}\label{readxl}}

\hypertarget{pdftools}{%
\section{pdftools}\label{pdftools}}

\hypertarget{tidy}{%
\chapter{Tidy}\label{tidy}}

\hypertarget{tidy-data}{%
\section{Tidy Data}\label{tidy-data}}

\hypertarget{longer}{%
\section{longer}\label{longer}}

\hypertarget{wider}{%
\section{wider}\label{wider}}

\hypertarget{transform}{%
\chapter{Transform}\label{transform}}

\hypertarget{filter}{%
\section{filter}\label{filter}}

\hypertarget{rename}{%
\section{rename}\label{rename}}

\hypertarget{select}{%
\section{select}\label{select}}

\hypertarget{select-helpers}{%
\subsection{select helpers}\label{select-helpers}}

\hypertarget{mutate}{%
\section{mutate}\label{mutate}}

\hypertarget{summarize}{%
\section{summarize}\label{summarize}}

\hypertarget{part-visualize}{%
\part{Visualize}\label{part-visualize}}

\hypertarget{base-r}{%
\chapter{Base R}\label{base-r}}

\hypertarget{plot}{%
\section{plot}\label{plot}}

\hypertarget{boxplot}{%
\section{boxplot}\label{boxplot}}

\hypertarget{hist}{%
\section{hist}\label{hist}}

\hypertarget{ggplot2}{%
\chapter{ggplot2}\label{ggplot2}}

\hypertarget{part-modelinfer}{%
\part{Model/Infer}\label{part-modelinfer}}

\hypertarget{test}{%
\chapter{Test}\label{test}}

\hypertarget{linear-model}{%
\chapter{Linear model}\label{linear-model}}

\hypertarget{machine-learning}{%
\chapter{Machine Learning}\label{machine-learning}}

\hypertarget{part-communicate}{%
\part{Communicate}\label{part-communicate}}

\hypertarget{r-markdown}{%
\chapter{R Markdown}\label{r-markdown}}

\hypertarget{part-automate}{%
\part{Automate}\label{part-automate}}

\hypertarget{shiny}{%
\chapter{shiny}\label{shiny}}

\hypertarget{part-program-1}{%
\part{Program}\label{part-program-1}}

\hypertarget{environments-2}{%
\chapter{Environments 2}\label{environments-2}}

　R について学ぶ前に R が使えるように環境を構築する必要がありますが、環境構築は初学者にとって厄介な部分でもあります。そこで、本書では学習レベルに合わせて以下のように環境を使い分けることをおすゝめします。\\
　

\begin{longtable}[]{@{}lll@{}}
\toprule
学習フェーズ & 環境 & 備考 \\
\midrule
\endhead
基礎学習フェーズ & \href{https://colab.research.google.com/?hl=ja}{Google Colaboratory } & 要Googleアカウント \\
応用学習フェーズ & \href{https://rstudio.cloud/}{RStudio Cloud } & beta edition \\
\bottomrule
\end{longtable}

　\\
　環境を構築するための基本的な知識がある方は最初から RStudio Dekstop（以降、RStudio）を利用しても構いません。

　

\hypertarget{google-colaboratory}{%
\section{Google Colaboratory}\label{google-colaboratory}}

　R の言語仕様など基礎的な学習フェーズでは環境構築の手間がかからないクラウド型の Google Colaboratory（以降、Google Colab）の利用をおすゝめします。Google Colab では Jupyter Notebook というデータ分析用のツールが使えます。ただし、デフォルトの状態で R を使うのは少し不便なので、以下の手順でファイルを準備します。\\
　

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  ブラウザで Google アカウントにログインする
\item
  Google Colab を開く
\item
  R 用のテンプレートファイルをアップロードする
\item
  R のコードが実行できることを確認する
\item
  アップロードしたファイルを Google ドライブに保存する
\end{enumerate}

　

\hypertarget{login-google}{%
\subsection{Login Google}\label{login-google}}

　Google Colab は名前通り Google が提供しているサービスですので Google のアカウントを持っていることが前提になります。また、Chrome 系（含む Chromium 系）のブラウザで利用することをおすゝめします。\\
　まず、ブラウザで \href{https://www.google.co.jp}{Google } のページを開きます。ページの右上に［ログイン］と表示されている場合は［ログイン］をクリックしてログインしておきます。

　

\hypertarget{open-google-colab}{%
\subsection{Open Google Colab}\label{open-google-colab}}

　Google で Google Colab を検索して \href{https://colab.research.google.com/notebooks/welcome.ipynb?hl=ja}{Colaboratory - Google Colab } のリンクをくと以下のような画面が表示されまます。\\
　

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/Colab/welcome} 

}

\caption{Google Colab, Theme: dark}\label{fig:unnamed-chunk-37}
\end{figure}

　画面テーマは右上の歯車ボタンから変更できます。

　

\hypertarget{upload-template}{%
\subsection{Upload Template}\label{upload-template}}

　Google Colab が立ち上がりましたら上部にあるメニュー ［ファイル］-［ノートブックをアップロード\ldots］を実行します。\\
　

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/Colab/upload_notebook} 

}

\caption{Upload notebook file}\label{fig:unnamed-chunk-38}
\end{figure}

　アップロード用のダイアログが開きますので［GitHub］タブをクリックし、上段のライン（画像の青線部分）に下記の URL を入力します。入力後、右端にある虫眼鏡アイコンをクリックします。

\texttt{https://gist.github.com/k-metrics/464ffbbd4d00e328560cd55966e7d4b8}~\\
　

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/Colab/upload_dialog} 

}

\caption{Upload from GitHub}\label{fig:unnamed-chunk-39}
\end{figure}

　テンプレートがアップロードされ表示されます。

　

\hypertarget{run-r-code}{%
\subsection{Run R code}\label{run-r-code}}

　テンプレートがアップロードできましたらテンプレートファイルの記述にしたがってコードを実行してみます。その際に下記のようなダイアログが表示されますが認証情報などを読み取ることはありませんので［このまま実行］をクリックしてください。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/Colab/run_dialog} 

}

\caption{Warning dialog}\label{fig:unnamed-chunk-40}
\end{figure}

　サーバ（ホスト型ランタイム）との接続するため実行までに多少時間がかかります。

　

\hypertarget{save-file}{%
\subsection{Save File}\label{save-file}}

　コードの実行が確認できましたらメニューの［ファイル］-［ドライブにコピーを保存\ldots］を実行してコピーを Google Drive に保存します。以降、この保存したファイルを利用してください。

　

\hypertarget{rstudio-cloud-1}{%
\section{RStudio Cloud}\label{rstudio-cloud-1}}

　Google Colab では R Markdown などのレポーティング機能は使用できませんので、このような場合には クラウド上で RStudio が利用できる RStudio Cloud が便利です。RStudio Cloud は統合開発環境の RStudio だけでなく種々のチュートリアルコンテンツを備えています。\\
　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/RSCloud_00} 

}

\caption{RStudio Cloud, beta}\label{fig:unnamed-chunk-41}
\end{figure}

　\\
　執筆時点では無償で利用することができ、無制限のプロジェクトとプライベートプロジェクトの作成が可能です。RStudio Cloud を利用するにはアカウントを取得するだけです。\\
　

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  ブラウザで \href{https://rstudio.cloud/}{RStudio Cloud } を開く
\item
  右上の［sign up］をクリックする
\item
  RStudio Cloud のアカウントを作成してサインアップするか、Google または GitHub のアカウントでログインする
\end{enumerate}

　

\hypertarget{create-project}{%
\subsection{Create Project}\label{create-project}}

　RStudio Cloud ではプロジェクトという単位で分析を管理しますので、最初にプロジェクトを作成します。作成手順については RStudio Cloud メニューにある［Guide］で確認してください。ガイドは全て英語ですが、 Chrome 系のブラウザであれば「Google翻訳」機能拡張を用いれば日本語に翻訳表示できます。\\
　プロジェクトを作成すると下図のような統合開発環境の RStudio が表示されます。RStudio 自体の説明は Appendix を参照してください。\\
　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/RSCloud_01} 

}

\caption{Initial View}\label{fig:unnamed-chunk-42}
\end{figure}

　

\hypertarget{install-packages}{%
\subsection{Install Packages}\label{install-packages}}

　RStudio Cloud の初期状態では R のパッケージは Base R しかインストールされていません。最も利用する \texttt{tidyverse} パッケージと \texttt{rmarkdown} パッケージをインストールするために右下のエリアにある \texttt{Packages} タブをクリックしてパッケージマネージャを表示させます。\\
　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/RSCloud_02} 

}

\caption{Packages Manager}\label{fig:unnamed-chunk-43}
\end{figure}

　\\
　次にパッケージマネージャの上部に表示されている \texttt{install} ボタンをクリックし表示されたダイアログに \texttt{tidyverse,\ rmarkdown} と入力し［install］ボタンをクリックしてインストールします。\\
　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/RSCloud_03} 

}

\caption{Install Dialog}\label{fig:unnamed-chunk-44}
\end{figure}

　\\
　以上で、RStudio Cloud の準備は完了です。

\hypertarget{appendix-appendix}{%
\appendix \addcontentsline{toc}{chapter}{\appendixname}}


\hypertarget{install-rrstudio}{%
\chapter{Install R/RStudio}\label{install-rrstudio}}

　R について学ぶ前に R が使えるように環境を整えます。本書は R, RStudio, \href{https://www.tidyverse.org/}{tidyverse/ } パッケージならびにその他必要なパッケージの利用を前提としています。\\
　R ならびに RStudio はマルチプラットフォーム対応（マルチOS対応）ですので Windows, macOS, Linux のどのプラットフォームを選択しても構いません。ただし、64bit プラットフォームであることが条件です。なお、日本語版 Windows では Windows が利用してる文字コード（CP932, Shift JIS）に起因する不具合が散見されています。日本語版 Windows 環境を利用する場合はその点を認識の上で利用してください。\\
　\\
　環境を整えるための手順は以下のようになります。

\begin{longtable}[]{@{}cll@{}}
\toprule
手順 & 実施内容 & 備考 \\
\midrule
\endhead
1 & Rのインストール & 64bit プラットフォーム \\
2 & Rtoolsのインストール & Winodws のみ \\
3 & RStudioのインストール & Desktop 版 \\
4 & パッケージのインストール & tidyverse, rmarkdown \\
5 & Gitのインストール & 任意 \\
\bottomrule
\end{longtable}

　\\
　\href{https://git-scm.com/}{Git } は VCS(Version Control System) と呼ばれるソースの版管理を行うシステムです。必要な場合のみインストールしてください。

　

\hypertarget{install-r}{%
\section{Install R}\label{install-r}}

　R は \href{https://cran.r-project.org/}{CRAN (The Comprehensive R Archive Network)} と呼ばれる公式リポジトリから入手してインストールします。 CRAN には \href{https://cran.r-project.org/mirrors.html}{ミラーサイト } も多数ありますので、利用しているインターネット環境に応じて近いサイトからダウンロードしてください。\\
　よくある質問は \href{https://cran.r-project.org/doc/FAQ/R-FAQ.html}{FAQ(Frequently Asked Questions) } にまとめられています。\\
　

\hypertarget{windows}{%
\subsection{Windows}\label{windows}}

　Winodws では特段の理由がない限り \href{https://cran.r-project.org/bin/windows/}{CRAN } から最新バージョンをインストールしてください。\\
　旧バージョンをインストールしたい場合は　\href{https://cran.r-project.org/bin/windows/base/old/}{Previous Releases of R for Windows } から当該バージョンをダウンロードしインストールしてください。\\
　\\
　日本語によるインストール方法が必要な場合は非公式ページですが \href{https://das-kino.hatenablog.com/entry/2019/11/07/125044}{R初心者の館（RとRStudioのインストール、初期設定、基本的な記法など） } などのサイトを参考にしてください。\\
　

\hypertarget{rtools}{%
\subsubsection{Rtools}\label{rtools}}

　Windows ではコンパイラなどの開発ツール類が標準装備されていませんので、 R のパッケージをインストールする際に必要となる Rtools と呼ばれるツールキットをインストールしておきます。 \href{https://cran.r-project.org/bin/windows/Rtools/}{Building R for Windows } のページからインストールした R のバージョン用の Rtools をダウンロードしてインストールしてください。なお、インストールの際はデフォルトオプションでインストールしてください。インストールディレクトリなどを変更すると正しく動かない場合があります。\\
　

\hypertarget{macos-os-x}{%
\subsection{macOS (OS X)}\label{macos-os-x}}

　macOS ではインストールできるバージョンが限られていますので \href{https://cran.r-project.org/bin/macosx/}{CRAN } で確認の上でインストールしてください。\\
　

\hypertarget{linux}{%
\subsection{Linux}\label{linux}}

　R がサポートしているディストリビューションは Debian, RedHat, Suse, Ubuntu のみです。Fedora を利用したい場合には \href{https://cran.r-project.org/bin/linux/redhat/README}{README } を参照の上で RedHat Software のリポジトリからインストールしてください。\\
　\\
　Linux の場合、ディストリビューションごと・バージョンごとにインストール方法が異なりますので各ディストリビューション用のディレクトリ内の README ファイルを参考にインストールしてください。\\
　

\hypertarget{install-rstudio-desktop}{%
\section{Install RStudio Desktop}\label{install-rstudio-desktop}}

　R のインストールが完了しましたら統合開発環境（IDE）である RStudio Desktop をインストールします。 \href{https://rstudio.com/products/rstudio/download/\#download}{Downloadページ } から使用している環境（OS）用の RStudio をダウンロードしてインストールしてください。 　

\hypertarget{ux52d5ux4f5cux78baux8a8d}{%
\subsection{動作確認}\label{ux52d5ux4f5cux78baux8a8d}}

　RStudio のインストールが完了したら RStudio を起動します。下図のようなウィンドウが立ち上がり左側の \textbf{Console} ペインに R のバージョンなどが表示されます。\\
　\\

　\textbf{Console} ペインのプロンプト（\texttt{\textgreater{}}表示）の部分に\texttt{2\ *\ 3}と打ち込んで［Enter］キーを押し\texttt{{[}1{]}\ 6}と表示されることを確認してください。

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{*} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

　

\hypertarget{install-r-packages}{%
\section{Install R packages}\label{install-r-packages}}

　次に必要となるいくつかのパッケージをインストールします。パッケージをインストールする場合はインターネットに接続されている必要があります。 \textbf{Console} ペインのプロンプトに以下のコードを入力し {[}Enter{]}キーを押して実行します。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{install.packages}\NormalTok{(}\StringTok{"tidyverse"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

　インストールが終わりましたらパッケージが正しくインストールされていることを確認するために \textbf{Console} ペインに以下のコードを入力して実行します。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

　以下のようなメッセージが表示されることを確認します。インストール時期によってはバージョン表記などが下記と異なる場合があります。なお、日本語版 Windows 環境では一部の文字が化けします。

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Loading required package}\SpecialCharTok{:}\NormalTok{ tidyverse}
\NormalTok{─ Attaching packages ─────────────────────────────── tidyverse }\DecValTok{1}\NormalTok{.}\FloatTok{3.0}\NormalTok{ ─}
\NormalTok{✔ ggplot2 }\DecValTok{3}\NormalTok{.}\FloatTok{2.1}\NormalTok{     ✔ purrr   }\DecValTok{0}\NormalTok{.}\FloatTok{3.3}
\NormalTok{✔ tibble  }\DecValTok{2}\NormalTok{.}\FloatTok{1.3}\NormalTok{     ✔ dplyr   }\DecValTok{0}\NormalTok{.}\FloatTok{8.3}
\NormalTok{✔ tidyr   }\DecValTok{1}\NormalTok{.}\FloatTok{0.0}\NormalTok{     ✔ stringr }\DecValTok{1}\NormalTok{.}\FloatTok{4.0}
\NormalTok{✔ readr   }\DecValTok{1}\NormalTok{.}\FloatTok{3.1}\NormalTok{     ✔ forcats }\DecValTok{0}\NormalTok{.}\FloatTok{4.0}
\NormalTok{─ Conflicts ───────────────────────────────── }\FunctionTok{tidyverse\_conflicts}\NormalTok{() ─}
\NormalTok{✖ dplyr}\SpecialCharTok{::}\FunctionTok{filter}\NormalTok{() masks stats}\SpecialCharTok{::}\FunctionTok{filter}\NormalTok{()}
\NormalTok{✖ dplyr}\SpecialCharTok{::}\FunctionTok{lag}\NormalTok{()    masks stats}\SpecialCharTok{::}\FunctionTok{lag}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

　

　続いて \href{https://rmarkdown.rstudio.com/}{rmarkdown } パッケージをインストールします。\texttt{tidyverse} パッケージのときと同様に以下のコードを \textbf{Console} ペインに入力して実行します。

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{install.packages}\NormalTok{(}\StringTok{"rmarkdown"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{linuxux74b0ux5883ux306eux5834ux5408}{%
\subsection{Linux環境の場合}\label{linuxux74b0ux5883ux306eux5834ux5408}}

　Linux環境ではプラットフォーム側のライブラリなどが足りずにパッケージのインストールが完了できない場合があります。その場合は \href{https://demo.rstudiopm.com/client/\#/}{RStudio Package Manager, demo site } にてインストールしたいパッケージが必要とするライブラリなどを確認、インストールしてから再度パッケージをインストールしてください。\\
　例えば Ubuntu 18.04LTS で R に \texttt{tidyverse} パッケージをインストールする場合には以下のようなライブラリなどがOS側にインストールされている必要があります。\\
　

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libicu{-}dev}
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ make}
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libcurl4{-}openssl{-}dev}
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libssl{-}dev}
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ pandoc}
\ExtensionTok{apt{-}get}\NormalTok{ install }\AttributeTok{{-}y}\NormalTok{ libxml2{-}dev}
\end{Highlighting}
\end{Shaded}

　

\hypertarget{install-git}{%
\section{Install Git}\label{install-git}}

　RStudio にはソースコードの版管理を行うインタフェースが標準で用意されていますが、版管理システム（以降、VCS）を別途インストールする必要があります。RStudio で利用できる VCS は以下の二つです。\\
　

\begin{itemize}
\tightlist
\item
  \href{https://git-scm.com/}{Git }
\item
  \href{https://subversion.apache.org/}{Subversion(SVN) }
\end{itemize}

　どちらを利用しても構いませんが \href{https://github.com/}{GitHub } などのクラウドサービスが充実している Git の利用をおすゝめします。\\
　

\hypertarget{git}{%
\subsection{Git}\label{git}}

　Windows および macOS は Gitの \href{https://git-scm.com/downloads}{ダウンロードページ } から最新バージョンをダウンロードしてインストールします。Linux はリポジトリからインストールするか \href{https://git-scm.com/downloads}{ダウンロードページ } から最新バージョンをダウンロードしてインストールしてください。\\
　

\hypertarget{git-client}{%
\subsection{Git Client}\label{git-client}}

　RStudio には簡易的な Git のクライアント機能が標準で用意されていますが、きめ細かな操作を行いたい場合には Git の GUI クライアントをインストールしてください。代表的な Git Client を以下に列挙しておきます。\\
　

\begin{longtable}[]{@{}lcccl@{}}
\toprule
Git GUI Client & Ubuntu & Mac & Windows & Memo \\
\midrule
\endhead
\href{https://www.gitkraken.com/}{GitKraken } & Yes & Yes & Yes & Free版は機能制限あり \\
\href{https://www.syntevo.com/smartgit/}{SmartGit } & Yes & Yes & Yes & Free版でも機能制限なし\textsuperscript{1} \\
\href{https://www.collab.net/downloads/giteye}{GitEye } & Yes & Yes & Yes & \\
\href{https://www.sourcetreeapp.com/}{Sourcetree } & No & Yes & Yes & 日本語版あり \\
\href{https://desktop.github.com/}{GitHub Desktop } & No & Yes & Yes & \\
\bottomrule
\end{longtable}

\textsuperscript{1} : 非商用利用の場合

　

\hypertarget{rstudio-server}{%
\chapter{RStudio Server}\label{rstudio-server}}

　R/Rstudio Desktop は前述のようにマルチプラットフォーム対応ですがプラットフォームごとに以下のような制約があります。\\
　

\begin{itemize}
\tightlist
\item
  日本語版 Windows 環境では文字コード（CP932, Shift JIS）が原因で日本語を正しく処理できない事例が散見される
\item
  18.04LTSより前の Ubuntu 環境では RStudio Desktop で日本語入力ができない * 有志による日本語入力パッチ（非公式パッチ）はあり
\item
  macOS 環境ではグラフの日本語が文字化けする * いわゆる豆腐文字問題
\end{itemize}

　\\
　特に日本語版 Windows 環境での問題は Windows が利用している文字コード（CP932, Shift JIS） に起因しているため問題は根本的な解決を期待できません。詳細については伝説とも言われている「Why are you using SJIS?」というキーワードで検索してみてください。\\
　\\
　日本語版 Windows 環境における文字コード問題を回避するためには、 \href{https://rstudio.com/products/rstudio/download-server/}{RStudio Server } を利用する方法が考えられます。 　RStudio Server は Linux 環境で動作する Web サーバベースの IDE ですが、 \href{https://www.docker.com/}{Docker } のコンテナ技術を利用することで Windows や macOS 環境で動作させることが可能です。 　

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.14}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.50}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.36}}@{}}
\toprule
OS & Docker app & System Requirements \\
\midrule
\endhead
macOS & Docker Desktop for Mac & \href{https://docs.docker.com/docker-for-mac/install/}{refer docker docs } \\
Windows & Docker Desktop for Windows & Hyper-V(Windows10 64bit Pro or Higher) or WSL2\textsuperscript{1} \\
\bottomrule
\end{longtable}

　\\
\textsuperscript{1} WSL2 は Windows10 version 2004 から利用可能になる予定です

　

\hypertarget{setup-rstudio-sever-with-docker}{%
\section{Setup RStudio Sever with Docker}\label{setup-rstudio-sever-with-docker}}

　Windows または macOS 環境で Docker を利用し RStudio Server を起動するためには以下の手順が必要です。\\
　

\begin{longtable}[]{@{}cll@{}}
\toprule
手順 & 実施内容 & 備考 \\
\midrule
\endhead
1 & Hyper-V の有効化 & Windows のみ \\
2 & Docker Desktop のインストール & \\
3 & Docker Image のダウンロード & \\
4 & Docker Container の起動 & \\
\bottomrule
\end{longtable}

　\\
　なお、Linux 環境での手順は割愛します。 　

\hypertarget{enable-hyper-v-windows-only}{%
\subsection{Enable Hyper-V (Windows Only)}\label{enable-hyper-v-windows-only}}

　Windows 環境ではインストールする前に \href{https://docs.microsoft.com/ja-jp/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v}{Hyper-V を有効にする } 必要があります。

\hypertarget{download-and-install-docker-desktop}{%
\subsection{Download and Install Docker Desktop}\label{download-and-install-docker-desktop}}

　利用している環境に応じた \href{https://www.docker.com/products/docker-desktop}{Docker Desktop } をダウンロードしてインストールします。なお、ダウンロードには \href{https://hub.docker.com/}{docker hub } でアカウント登録が必要です。\\
　\\
　詳細な手順や設定方法は \href{https://docs.docker.com/get-docker/}{Docker docs } を参照してください。\\
　

\hypertarget{download-docker-image}{%
\subsection{Download Docker Image}\label{download-docker-image}}

　Docker Desktop をインストール・起動しましたら RStudio Server の Docker Image をダウンロードします。様々な方が RStudio Server の Docker Image を公開されていますが代表的な Docker Image には次のようなものがあります。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
Image & Description \\
\midrule
\endhead
\href{https://hub.docker.com/r/rocker/tidyverse}{rocker/tidyverse } & Version-stable base R and RStudio, tidyverse, devtools \\
\href{https://hub.docker.com/r/rocker/verse}{rocker/verse } & Adds TeX and related packages to rocker/tidyverse \\
\href{https://hub.docker.com/r/ykunisato/paper-r-jp}{ykunisato/paper-r-jp } & Dockerfile of writing paper by R Markdown \\
\href{https://hub.docker.com/r/kmetrics/jverse}{kmetrics/jverse } & Japanized rocker/verse \\
\bottomrule
\end{longtable}

　\\
　\href{https://github.com/rocker-org/rocker}{rocker } は準公式とも言えるような R に関連する Docker Image を継続的に提供しているプロジェクトです。様々なイメージを提供していますが残念ながら日本語フォントの追加などの日本語対応がなされていません。グラフで日本語を利用しない限りは rocker のイメージを利用しても何ら問題はありません（ソースなどの表示はブラウザに依存しているのでコードに日本語を記述することが可能です）。\\
　グラフで日本語を利用したい場合は著者が rocker/verse に日本語フォントなどを追加して日本語対応させた \href{https://hub.docker.com/r/kmetrics/jverse}{kmetrics/jverse } を利用するか rocker が公開している Dockerfile を改修して日本語対応させたイメージを利用してください。\\
　\\
　利用する Docker Image を決めたらコンソール（コマンドプロンプト）で以下のコマンドを実行してイメージをダウンロードしてください。\\
　

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{docker}\NormalTok{ pull rocker/tidyverse}
\end{Highlighting}
\end{Shaded}

　

\hypertarget{run-container}{%
\subsection{Run Container}\label{run-container}}

\hypertarget{rstudio-ide}{%
\chapter{RStudio IDE}\label{rstudio-ide}}

　データ分析勉強会では長らく \href{https://www.rcommander.com/}{R Commander（以降、Rcmdr） } が利用されています。勉強会の母体となっている \href{https://www.juse.or.jp/sqip/workshop/outline/index.html}{SQiP研究会 } のソフトウェアメトリクスに関する演習コースでも同様です。これはプログラミングに縁の薄いソフトウェア品質管理技術者が短期間で R を用いた分析を行えるようにとの配慮からです。実際、 Rcmdr はコードを記述しなくてもデータの可視化や分析ができますのでデータ分析の初学者にとっては R の恩恵を簡単に受けられる非常に便利な道具です。\\
　しかし、Rcmdr は R のごく一部の関数を GUI で使えるようにしたラッパープログラムですので、できることが非常に限られています。加えて GUI 操作なため操作自体が記録に残りません。つまり、探索的にデータを分析を行ってもその手順分析者の記憶に依存してしまいますので分析再現性の観点から見ると好ましい分析環境とは言えません。\\
　\\
　本格的な探索的データ分析を行うには、出来ることが限られる Rcmdr ではなく R のスクリプトを用いるべきです。しかし、 R 本体（R Console）は非常に機能が限られていますので、それだけで探索的データ分析を行うのは非常に困難です。そこで、初学者には様々な機能を予め備えている統合開発環境（IDE - Integrated Development Environment）を利用をおすゝめします。\\
　\\
　R 用統合開発環境のデファクトスタンダードと言えるのが RStudio, PBC の \href{https://rstudio.com/products/rstudio/}{RStudio IDE （以降、RStudio）} です。無償版である Open Source Edition でも全ての基本的な機能を利用できます。\\
　\\
　初学者にとって RStudio には以下のような便利な機能があります。

\begin{itemize}
\tightlist
\item
  補完機能が強力

  \begin{itemize}
  \tightlist
  \item
    関数名・変数名・パッケージ名などを補完してくれますので入力負荷が大幅に減ります
  \end{itemize}
\item
  エディタ機能が強力

  \begin{itemize}
  \tightlist
  \item
    キーひとつでヘルプの参照が可能ですので即座に疑問が解決できます
  \item
    部分的にコードを実行できますので手順を確認しながらコーディングできます
  \item
    Markdown 記述が使えますので分析と報告書作成を同時に進められます

    \begin{itemize}
    \tightlist
    \item
      コードの直下に実行結果を表示することができますのでコードと実行結果の関係性が一目でわかります
    \end{itemize}
  \end{itemize}
\item
  パッケージ管理が分かりやすい

  \begin{itemize}
  \tightlist
  \item
    インストールされているパッケージが一目でわかります
  \item
    パッケージの検索・読込み・インストールが GUI 操作で簡単にできます
  \end{itemize}
\item
  その他の便利な機能

  \begin{itemize}
  \tightlist
  \item
    作成した変数を一覧で確認できると共に値も確認できます
  \item
    プロジェクト管理機能が使えますので分析ごとにファイルなどをセパレートできます
  \item
    バージョンコントロールシステムを用いた履歴管理ができます
  \item
    Python などの他言語もサポートしています
  \end{itemize}
\end{itemize}

　上記は機能のほんの一部を紹介したにすぎません。 RStudio は R を利用した探索的データ分析を効率的かつ強力にしかも無償でサポートしてくれる道具です。\\
　

\hypertarget{overview}{%
\section{Overview}\label{overview}}

　RStudio を起動すると以下のような画面が表示されます。画面は大きく以下の四つのエリアに分割されており、左上の A のエリアはソースエディタが表示されるエリアなので初めて起動した際には表示されません。\\
　

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_Area} 

}

\caption{RStudio Desktop, Windows}\label{fig:unnamed-chunk-52}
\end{figure}

　各エリアのサイズ（ウィンドウ内での比率）は任意に調整できますが、横幅に関しては A と B 、 C と D が常に同サイズとなります。各エリアにはペインと呼ばれるタブ切り替え型のサブエリアが表示されます。ペインは常時表示されるペイン（下図の黒文字）と機能が呼び出されたり利用を設定している場合にのみ表示されるペイン（下図の灰文字）があります。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_Pane} 

}

\caption{RStudio Pane Layout, Windows}\label{fig:unnamed-chunk-53}
\end{figure}

　RStudio のバージョンにより多少ペイン構成が異なりますが以下のペインが用意されています。これらのペインはグローバルオプションで表示位置の変更や表示・非表示の切り替えができます。\\
　

\begin{longtable}[]{@{}clll@{}}
\toprule
No & Area & Pane name & Descriptions \\
\midrule
\endhead
1 & A & (File name) & ソースエディタ（ファイルが開かれていない場合は未表示） \\
2 & A & (Data name) & データフレーム型の変数などを表示するデータビューア \\
3 & B & Console & 文字通りRのコンソール（実行結果の表示だけでなくここから実行することも可） \\
4 & B 　 & Terminal & OS のターミナル（RStudio v1.1から） \\
5 & B & R Markdown & R Markdown ファイルをレンダリングした際にレンダリング情報を表示 \\
6 & B 　 & Jobs & ローカルジョブの実行マネージャ（RStudio v1.2から） \\
7 & C & Environment & オブジェクト（変数、関数）の表示と参照ができる環境マネージャ \\
8 & C & History & 実行履歴マネージャ（コンソールでの実行、ソースからの実行共に記録） \\
9　 & C & Connections & データソース接続マネージャ（RStudio v1.1から） \\
10 & C & Build & ビルドツール（プロジェクトオプションで有効にしている場合のみ） \\
11 & C & Git or SVN & 簡易VCSクライアント（プロジェクトオプションでVCSを有効にしている場合のみ） \\
12 & D & Files & 簡易なファイルマネージャ \\
13 & D & Plots & グラフィック専用プロットエリア（ヒストリ機能、出力機能付き） \\
14 & D & Packages & パッケージ管理を行うためのパッケージマネージャ \\
15 & D & Help & ヘルプビューア（ソースエディタやコンソールと連動したヘルプ表示が可） \\
16 & D & Viewer & HTML等の表示が可能なビューア \\
\bottomrule
\end{longtable}

　

\hypertarget{keyboard-shortcuts}{%
\section{Keyboard Shortcuts}\label{keyboard-shortcuts}}

　キーボードショートカットは効率的なコーディングに役立ちますので、最低限、以下のショートカットを覚えましょう。\\
　

\begin{longtable}[]{@{}ll@{}}
\toprule
Keyboard Shortcuts & Description \\
\midrule
\endhead
［TAB］ & 入力中のコード（オブジェクト）を補完 \\
［Alt/Option］+［-］ & 代入演算子（\texttt{\textless{}-}）をカーソル位置に挿入する \\
［Ctrl/Cmd］+［Shift］+［M］ & パイプ演算子（\texttt{\%\textgreater{}\%}）をカーソル位置に挿入する \\
［Ctrl/Cmd］+［Shift］+［C］ & 選択行をコメント・アンコメントする（トグル動作） \\
［Ctrl/Cmd］+［Alt/Option］+［I］ & カーソル位置にコードチャンクを挿入する（R Markdownのみ） \\
［Ctrl/Cmd］+［Enter］ & 選択したコードを実行する（行選択、部分選択どちらも可） \\
［Ctrl/Cmd］+ {[}Shift{]} +［Enter］ & コードチャンク内の全てのコードを実行する（R Markdownのみ） \\
［F1］ & 選択またはカーソル位置の関数のヘルプを呼び出す \\
［Ctrl/Cmd］+［F］ & アクティブなペイン内の検索 \\
\bottomrule
\end{longtable}

　\\
　上記以外のショートカットはメニュー［\textbf{Tools}］-［\textbf{Keyboard Shortcuts Help}］を選択すると表示できます。\\
　

\hypertarget{writing-r-code}{%
\section{Writing R code}\label{writing-r-code}}

　では、実際に RStudio を利用して簡単なコードを書いてみましょう。初学者が学習のために R のコードを記述するには R Notebook 形式が便利です。 R Notebook 形式は マークダウン言語とコードを混在できる R Markdown 形式を簡易にしたものです。コード以外に説明などを記述できるのでアウトプットしながらの学習が可能です。 　R Notebook 形式を使うにはメニューから［File］-［New File］-［R Notebook］を実行します。すると下図のようなソースエディタ（以降、エディタ）が開きます。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN} 

}

\caption{R Notebook file}\label{fig:unnamed-chunk-54}
\end{figure}

　この時点ではファイルとして保存されていませんので、メニューから［File］-［Save As\ldots］を実行して適当な場所に適当な名前で保存しておきます。ここでは \texttt{test} という名前を入力して保存します。ファイルの拡張子が自動的に付与されますのでタブの表示は \texttt{test.Rmd} となります。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN_Saved} 

}

\caption{R Notebook saved file}\label{fig:unnamed-chunk-55}
\end{figure}

　ファイルを保存したら 6 行目の「This is an　\ldots」から 18 行目の「in the editor is displayed.」までを削除し、カーソルの位置（6 行目）でキーボードショートカット［Ctrl/Cmd］+［Alt/Option］+［I］を押下してコードを記述するためのブロックを挿入します。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN_Insert_Chunk} 

}

\caption{R Notebook insert chunk}\label{fig:unnamed-chunk-56}
\end{figure}

　すると上図のように三連のバッククォート（\texttt{\textasciigrave{}\textasciigrave{}\textasciigrave{}}）で囲まれたブロックが挿入されます。このブロックはコードチャンクと呼ばれる R のコードを記述する部分です。コードチャンクの前後は自由な記述が出来ますので、以下のように入力してみてください。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN_First_Code} 

}

\caption{R Notebook first code}\label{fig:unnamed-chunk-57}
\end{figure}

　上図のように R Notebook では説明とコードを混在することができます。では、コードチャンクの右上にある緑色の三角マークをクリックしてコードを実行してみましょう。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN_Run_Code} 

}

\caption{R Notebook run code}\label{fig:unnamed-chunk-58}
\end{figure}

　コードチャンクの下と \textbf{Console} ペインに実行結果が表示されます。コードチャンクの下に実行結果が表示されない場合は下図のように歯車アイコンをクリックし表示したメニューから \texttt{Chunk\ Output\ Inline} にチェックをつけ、再度、緑色の三角マークをクリックしてコードを実行してください。コードチャンクの下に実行結果が表示されます。

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/DT_RN_Option} 

}

\caption{R Notebook option}\label{fig:unnamed-chunk-59}
\end{figure}

　最後にフロッピーディスクアイコンをクリックするかキーボードショートカットの［Ctrl/Cmd］+［S］を押下してファイルを保存しておきます。

\hypertarget{global-options}{%
\section{Global Options}\label{global-options}}

　メニュー［\textbf{Tools}］-［\textbf{Global Options\ldots{}}］を選択すると表示できます。以降に推奨設定項目を記載しておきますので参考にしてください。記載されていないオプションはお好みで設定してください。\\
　

\hypertarget{general}{%
\subsection{General}\label{general}}

　Genelal オプションは RStudio の全般的な動作に関する設定です。 Basic と Advanced の二種類の設定がありますが、初学者の方は Basic のみ以下のように設定しておくと便利です。\\
　

\begin{longtable}[]{@{}llll@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
Basic & R Sessions & R version & Default（Windows only） \\
Basic & R Sessions & Default working directory & 任意のディレクトリ \\
Basic & R Sessions & Restore most recently opened project at startup & Unchecked \\
Basic & Workspace & Restore .RData into workspace at startup & Checked \\
Basic & Wrokspace & Save workspace to .RData on exit & ``Ask'' or ``Always'' \\
Basic & Ohter & Automatically notify me of updates to RStudio & Checked \\
\bottomrule
\end{longtable}

　\\
　特に ``Default working directory'' はプロジェクトを作成・管理するディレクトリに設定しておくと便利です。

　

\hypertarget{code}{%
\subsection{Code}\label{code}}

　Code オプションはソースエディタの動作に関する設定です。ソースの記述は \href{https://style.tidyverse.org/}{スタイルガイド（The tidyverse style guide） } に準拠することをおすゝめしますので、設定例もスタイルガイドに沿ったものになっています。なお、 Python などの他言語を併用する場合は適切な設定に変更してください。\\
　

\begin{longtable}[]{@{}llll@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
Editing & General & Insert spaces for tab & Checked \\
Editing & General & Tab width & 2 \\
Editing & General & Auto-detect code indentation & Checked \\
Editing & General & Insert matching parens/quotes & Checked \\
Editing & General & Auto-indent code after paste & Checked \\
Editing & General & Vertically align arguments in atuo-indent & Checked \\
Editing & General & Surround selection on text insertion & ``Quotes \& Brackets'' \\
Editing & Execution & Always save R scripts before sourcing & Checked \\
Editing & Execution & Ctrl+Enter executes & ``Multi-line R statement'' \\
Display & General & Highlight selected word & Checked \\
Display & General & Highlight selected line & Checked \\
Display & General & Show line numbers & Checked \\
Display & General & Show margin & Checked \\
Display & General & Margin coloumn & 80 \\
Display & General & Show whitespace characters & Checked \\
Display & General & Show syntax highlighting in console input & Checked \\
Saving & General & Restore last cursor position when opening file & Checked \\
Saving & Serialization & Line ending conversion & ``Posix (LF)'' \\
Saving & Serialization & Default text encoding & ``UTF-8'' \\
\bottomrule
\end{longtable}

　

\hypertarget{appearance}{%
\subsection{Appearance}\label{appearance}}

　Appearance オプションは RStudio の見た目に関する設定です。フォント設定のみ日本語の固定ピッチフォントに変更し、その他はお好みでどうぞ。\\
　

\begin{longtable}[]{@{}llll@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
N/A & N/A & Editor font & 任意の日本語等幅フォント \\
\bottomrule
\end{longtable}

　\\
　日本語等幅フォントは好みで構いませんが、無償ダウンロード可能な以下のフォントがおすゝめです。

\begin{itemize}
\tightlist
\item
  BIZ UDゴシック（macOS, Windows） - MORISAWA PASSPORT
\item
  Source Han Code JP（Linux, macOS） - SIL Open Font License
\item
  IPAゴシック（Linux, macOS, Windows） - IPA フォントライセンス
\end{itemize}

　なお、日本語版 Windows の RStudio では一部の日本語等幅フォントを正しく表示できないバグがあるようですので、フォントの選択には注意してください。

　

\hypertarget{pane-layout}{%
\subsection{Pane Layout}\label{pane-layout}}

　Pane Layout オプションは前述のペインの表示場所や表示・非表示を変更するためのオプションですので、初学者はデフォルト設定のまま利用することをおすゝめします。

　

\hypertarget{packages}{%
\subsection{Packages}\label{packages}}

　Packages オプションはパッケージマネジメントに関する設定です。 Management と Development の二種類の設定がありますが、Development はパッケージ自体を開発するためのオプションですので Management のみ設定してください。\\
　

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.16}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.21}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.42}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.22}}@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
Management & Package Management & Primary CRAN repository & 任意のhttpsサイト\textsuperscript{1} \\
Management & Package Management & Enable packages pane & Checked \\
Management & Package Management & Use secure download method for HTTP & Checked \\
Management & Package Management & Use Internet Explorer library/proxy for HTTP & Checked \textsuperscript{2} \\
\bottomrule
\end{longtable}

　

\textsuperscript{1} ネットワーク的に最も速い（近い）サイトを選んでください \textsuperscript{2} プロキシサーバーを利用している場合に設定してください

　

\hypertarget{r-markdown-1}{%
\subsection{R Markdown}\label{r-markdown-1}}

　R Markdown オプションは R Markdown に関する設定です。

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.16}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.21}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.42}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.22}}@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
N/A & R Markdown & Show inline toolbar for R code chunk & Checked \\
N/A & R Markdown & Enable chunk background highlight & Checked \\
N/A & R Markdown & Show output preview in & ``Viewer Pane'' \\
N/A & R Markdown & Show output inline for all R Markdown documents & Checked \\
N/A & R Markdown & Show equation and image previews & ``Inline'' or ``In a popup'' \\
N/A & R Markdown & Evaluate chunks in directory & ``Document'' \\
N/A & R Notebooks & Execute setup chunk automatically in notebooks & Checked \\
N/A & R Notebooks & Hide console automatically when executing notebook chunks & Checked \\
\bottomrule
\end{longtable}

\hypertarget{sweave}{%
\subsection{Sweave}\label{sweave}}

　Sweave オプションは R + LaTeX によるドキュメント作成に関する設定です。 Sweave を利用しない限り基本的に変更する必要はありませんが、 R Markdown で PDF ファイルを作成する場合は PDF ビューアに関する設定のみお好みのビューアを設定してください。\\
　

\begin{longtable}[]{@{}llll@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
N/A & PDF Preview & Preview PDF after compile using & お好みのビューア \\
\bottomrule
\end{longtable}

　

\hypertarget{spelling}{%
\subsection{Spelling}\label{spelling}}

　Spelling オプションはスペルチェックのための設定です。UK または US の English を指定するのが無難です。

　

\hypertarget{gitsvn}{%
\subsection{Git/SVN}\label{gitsvn}}

　Git/SVN オプションはバージョンコントロールシステム（VCS）に対する設定です。VCS を利用する場合のみ設定してください。

　

\hypertarget{publishing}{%
\subsection{Publishing}\label{publishing}}

　Publishing オプションは　RStudio, Inc.~が提供しているサービスへドキュメントを発行する場合に利用する設定ですので、当該のサービスを利用する場合のみ設定してください。

　

\hypertarget{terminal}{%
\subsection{Terminal}\label{terminal}}

　Terminal オプションは OS のターミナルを RStudio の Terminal ペインから利用するための設定です。Terminal ペインを利用する場合のみ設定してください。\\
　

\begin{longtable}[]{@{}llll@{}}
\toprule
大項目(Tab) & 中項目(太文字) & 設定項目 & 推奨設定 \\
\midrule
\endhead
N/A & Shell & New terminals open with & 任意のシェル \\
N/A & Connection & Connect with WebSockts & Terminalが起動しない場合はチェックを外す \\
\bottomrule
\end{longtable}

　

\hypertarget{project-options}{%
\section{Project Options}\label{project-options}}

　メニュー［\textbf{Tools}］-［\textbf{Project Options\ldots{}}］を選択すると表示できます。 Build Tools と Git/SVN を除いて基本的にグローバルオプションと同一の設定で構いません。\\
　\\
　Build Tools オプションは R Markdown Website や Bookdown を利用する場合に以下のように設定するのをおすゝめします。\\
　

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.17}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.23}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.38}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.22}}@{}}
\toprule
大項目 & 中項目（太文字） & 設定項目 & 推奨設定 \\
\midrule
\endhead
Build Tools & N/A & Project build tools & ``Website'' \\
Build Tools & N/A & Preview book after building & Checked \\
Build Tools & N/A & Re-knit current preview when supporting files change & Checked \\
\bottomrule
\end{longtable}

　Git/SVN オプションは VCS を利用する場合に利用する VCS を選択してください。VCS がインストールされていない場合は有効にできません。

\hypertarget{cloud-ide}{%
\chapter{Cloud IDE}\label{cloud-ide}}

　開発環境のクラウドサービス化も進んでいます。

\hypertarget{rstudio-cloud-ga}{%
\section{RStudio Cloud GA}\label{rstudio-cloud-ga}}

　\href{https://rstudio.cloud/}{RStudio Colud } は RStudio, PBC が提供している RStudio Server によるクラウドサービスです。2020年2月末時点では無料プランでも無制限のプロジェクトならびにプライベートなプロジェクトの作成が可能です。また、 \texttt{learnr} パッケージを用いた初学者用のチュートリアルなど学習資料が多数用意されているのも特徴です。

　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/RStudio/Cloud} 

}

\caption{RStudio Cloud, beta}\label{fig:unnamed-chunk-60}
\end{figure}

　

　ただし、無料プランで使えるリソースはメモリ 1GB ・ 1CPU と限られていますので、ナイーブ・ベイズのようなメモリを必要とする機械学習プログラミングなどには向いていません。なお、 Google Colab のように24時間でインスタンスが消滅するというようなことは無いようです。

　

\hypertarget{exploratory}{%
\section{Exploratory}\label{exploratory}}

　\href{https://exploratory.io/}{Exploratory } は BI（Business Intelligence）BI（Business Intelligence）ツールのような操作で R を持ちた探索的データ分析（EDA）が行える利用できる専用クライアントアプリケーションを用いるクラウドサービスです。無料で利用できますがオンライン限定・パブリックシェアオンリーとなりますので注意してください。

　\href{https://exploratory.io/insight?type=note\&q=tag\%3Avisualization\%20tag\%3Ahow-to\%20tag\%3A\%22team\%20exploratory\%22\&sort=top-viewed\&language=ja}{何ができるのか見てみる } ページで多数の分析サンプルが公開されています。\\
　また、 \href{https://exploratory.io/howto?language=ja}{使い方ガイド } ページにも様々な説明資料が用意されています。

　\\

\begin{figure}[H]

{\centering \includegraphics[width=0.8\linewidth,]{fig/Exploratory} 

}

\caption{Exploratory Public}\label{fig:unnamed-chunk-61}
\end{figure}

　

　\href{https://exploratory.io/pricing}{価格 } ページからお好みのプランを選んでアカウントを取得します。クライアントアプリケーションは、mac まはた Windwos でしか動作しません。

　

\hypertarget{binder}{%
\section{binder}\label{binder}}

　\href{https://mybinder.org/}{binder } は 実行環境の再現性を確保するためのクラウドサービスです。指定したGit のリポジトリから自動的に Jupyter Notebook のコード実行環境（Docker イメージ）を構築しクラウド上で実行することによりリポジトリにあるソースコードを動作さあせることができます。リポジトリに設定ファイルを置くことで RStudio Server や Shiny 環境を構築・実行することも可能です。\\
　Google Colab や RStudio Cloud・Exploratoy などと異なりアカウントを取得する必要はありませんが、専用の環境を構築するわけではなく、あくまでも一時的な試用環境である点に注意してください。継続的に使える環境が必要な場合は ローカルに環境を構築するか RStudio Cloud のようなクラウドサービスを利用してください。

　

\end{document}
